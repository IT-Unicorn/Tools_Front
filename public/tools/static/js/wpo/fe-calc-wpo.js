baidu.calcPageLoadTime=(function(){var c={};var d=function(){if(c.header&&c.time&&c.pageInfo){b()}else{$.ajax({type:"GET",url:window.location.href,complete:function(i,h){c.header={date:i.getResponseHeader("Date"),connection:i.getResponseHeader("Connection"),contentEncoding:i.getResponseHeader("Content-Encoding"),contentLength:i.getResponseHeader("Content-Length"),server:i.getResponseHeader("Server"),vary:i.getResponseHeader("Vary"),transferEncoding:i.getResponseHeader("Transfer-Encoding"),contentType:i.getResponseHeader("Content-Type"),cacheControl:i.getResponseHeader("Cache-Control"),exprires:i.getResponseHeader("Exprires"),lastModified:i.getResponseHeader("Last-Modified")};a();g();b()}})}};var a=function(){c.pageInfo={title:document.title,url:location.href}};var g=function(){c.time=performance.timing};var b=function(){chrome.extension.sendMessage({type:MSG_TYPE.CALC_PAGE_LOAD_TIME,wpo:c})};var f=function(){if(/^((http)|(https))\:\/\//.test(location.href)){d()}else{a();g();b()}};var e=function(){chrome.runtime.onMessage.addListener(function(j,i,k){if(j.type==MSG_TYPE.GET_PAGE_WPO_INFO){(function h(){(document.readyState=="complete")?f():setTimeout(h,1000)})()}})};return{init:e}})();baidu.calcPageLoadTime.init();
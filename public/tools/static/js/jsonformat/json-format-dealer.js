var JsonFormatDealer=(function(){var c=1,g=2,a=3,e=4,n=5,p=6;function i(v){v=("__"+v+"__").split("");var u={singleQuote:false,doubleQuote:false,regex:false,blockComment:false,lineComment:false,condComp:false};for(var t=0,s=v.length;t<s;t++){if(u.regex){if(v[t]==="/"&&v[t-1]!=="\\"){u.regex=false}continue}if(u.singleQuote){if(v[t]==="'"&&v[t-1]!=="\\"){u.singleQuote=false}continue}if(u.doubleQuote){if(v[t]==='"'&&v[t-1]!=="\\"){u.doubleQuote=false}continue}if(u.blockComment){if(v[t]==="*"&&v[t+1]==="/"){v[t+1]="";u.blockComment=false}v[t]="";continue}if(u.lineComment){if(v[t+1]==="\n"||v[t+1]==="\r"){u.lineComment=false}v[t]="";continue}if(u.condComp){if(v[t-2]==="@"&&v[t-1]==="*"&&v[t]==="/"){u.condComp=false}continue}u.doubleQuote=v[t]==='"';u.singleQuote=v[t]==="'";if(v[t]==="/"){if(v[t+1]==="*"&&v[t+2]==="@"){u.condComp=true;continue}if(v[t+1]==="*"){v[t]="";u.blockComment=true;continue}if(v[t+1]==="/"){v[t]="";u.lineComment=true;continue}u.regex=true}}return v.join("").slice(2,-2)}localStorage.jfVersion="0.5.6";var d,b=document.createElement("span");function j(u,t){var s=b.cloneNode(false);s.className=t;s.innerText=u;return s}function l(t){var s=b.cloneNode(false);s.innerText=t;return s}function r(t){var s=b.cloneNode(false);s.className=t;return s}var q={t_kvov:r("kvov"),t_exp:r("e"),t_key:r("k"),t_string:r("s"),t_number:r("n"),t_null:j("null","nl"),t_true:j("true","bl"),t_false:j("false","bl"),t_oBrace:j("{","b"),t_cBrace:j("}","b"),t_oBracket:j("[","b"),t_cBracket:j("]","b"),t_ellipsis:r("ell"),t_blockInner:r("blockInner"),t_colonAndSpace:document.createTextNode(":\u00A0"),t_commaText:document.createTextNode(","),t_dblqText:document.createTextNode('"')};function h(F,C){var A,E,y,w=q,x,v,s;if(typeof F==="string"){A=c}else{if(typeof F==="number"){A=g}else{if(F===false||F===true){A=n}else{if(F===null){A=p}else{if(F instanceof Array){A=e}else{A=a}}}}}E=w.t_kvov.cloneNode(false);if(A===a||A===e){y=false;for(x in F){if(F.hasOwnProperty(x)){y=true;break}}if(y){E.appendChild(w.t_exp.cloneNode(false))}}if(C!==false){E.classList.add("objProp");v=w.t_key.cloneNode(false);v.textContent=JSON.stringify(C).slice(1,-1);E.appendChild(w.t_dblqText.cloneNode(false));E.appendChild(v);E.appendChild(w.t_dblqText.cloneNode(false));E.appendChild(w.t_colonAndSpace.cloneNode(false))}else{E.classList.add("arrElem")}var D,L;switch(A){case c:var u=b.cloneNode(false),G=JSON.stringify(F);G=G.substring(1,G.length-1);if(F[0]==="h"&&F.substring(0,4)==="http"){var t=document.createElement("A");t.href=F;t.innerText=G;u.appendChild(t)}else{u.innerText=G}s=w.t_string.cloneNode(false);s.appendChild(w.t_dblqText.cloneNode(false));s.appendChild(u);s.appendChild(w.t_dblqText.cloneNode(false));E.appendChild(s);break;case g:s=w.t_number.cloneNode(false);s.innerText=F;E.appendChild(s);break;case a:E.appendChild(w.t_oBrace.cloneNode(true));if(y){E.appendChild(w.t_ellipsis.cloneNode(false));D=w.t_blockInner.cloneNode(false);var B=0,H,K;for(H in F){if(F.hasOwnProperty(H)){B++;L=h(F[H],H);K=w.t_commaText.cloneNode();L.appendChild(K);D.appendChild(L)}}L.removeChild(K);E.appendChild(D)}E.appendChild(w.t_cBrace.cloneNode(true));break;case e:E.appendChild(w.t_oBracket.cloneNode(true));if(y){E.appendChild(w.t_ellipsis.cloneNode(false));D=w.t_blockInner.cloneNode(false);for(var I=0,z=F.length,J=z-1;I<z;I++){L=h(F[I],false);if(I<J){L.appendChild(w.t_commaText.cloneNode())}D.appendChild(L)}E.appendChild(D)}E.appendChild(w.t_cBracket.cloneNode(true));break;case n:if(F){E.appendChild(w.t_true.cloneNode(true))}else{E.appendChild(w.t_false.cloneNode(true))}break;case p:E.appendChild(w.t_null.cloneNode(true));break}return E}function m(u,s){var w=h(u,false);w.classList.add("rootKvov");var t=document.createElement("DIV");t.id="formattedJson";t.appendChild(w);var v=t.outerHTML;if(s!==null){v='<div id="jsonpOpener">'+s+" ( </div>"+v+'<div id="jsonpCloser">)</div>'}return v}var k=function(u){var B=null;var v=JsonFormatEntrance;if(u.type==="SENDING TEXT"){var w,D=u.text;try{w=new Function("return "+D)()}catch(y){D=D.trim();var t;if(!(t=D.indexOf("("))){v.postMessage(["NOT JSON","no opening parenthesis"]);v.disconnect();return}var s=i(D.substring(0,t)).trim();if(!s.match(/^[a-zA-Z_$][\.\[\]'"0-9a-zA-Z_$]*$/)){v.postMessage(["NOT JSON","first bit not a valid function name"]);v.disconnect();return}var C;if(!(C=D.lastIndexOf(")"))){v.postMessage(["NOT JSON","no closing paren"]);v.disconnect();return}var A=i(D.substring(C+1)).trim();if(A!==""&&A!==";"){v.postMessage(["NOT JSON","last closing paren followed by invalid characters"]);v.disconnect();return}D=D.substring(t+1,C);try{w=JSON.parse(D)}catch(z){v.postMessage(["NOT JSON","looks like a function call, but the parameter is not valid JSON"]);return}B=s}if(typeof w!=="object"&&typeof w!=="array"){v.postMessage(["NOT JSON","technically JSON but not an object or array"]);v.disconnect();return}v.postMessage(["FORMATTING"]);var x=m(w,B);v.postMessage(["FORMATTED",x]);v.disconnect()}};var f=function(s){k(s)};var o=function(){};return{postMessage:f,disconnect:o}})();
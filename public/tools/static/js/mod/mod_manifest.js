var baidu=function(){this.version="1.3.5"};baidu.namespace=new Object();baidu.namespace.register=function(fullNS){var reg=/^[_$a-z]+[_$a-z0-9]*/i;var nsArray=fullNS.split(".");var sEval="";var sNS="";for(var i=0;i<nsArray.length;i++){if(!reg.test(nsArray[i])){throw new Error("Invalid namespace:"+nsArray[i]+"");return}if(i!=0){sNS+="."}sNS+=nsArray[i];sEval+="if (typeof("+sNS+") == 'undefined') "+sNS+" = new Object();"}if(sEval!=""){eval(sEval)}};String.prototype.trim=function(){return this.replace(/^\s*|\s*$/g,"")};String.prototype.format=function(){var b=arguments.length,a=this;while(b--){a=a.replace(new RegExp("\\{"+b+"\\}","g"),arguments[b])}return a};Date.prototype.format=function(e){var a=function(m,l){var n="",k=(m<0),j=String(Math.abs(m));if(j.length<l){n=(new Array(l-j.length+1)).join("0")}return(k?"-":"")+n+j};if("string"!=typeof e){return this.toString()}var b=function(k,j){e=e.replace(k,j)};var f=this.getFullYear(),d=this.getMonth()+1,i=this.getDate(),g=this.getHours(),c=this.getMinutes(),h=this.getSeconds();b(/yyyy/g,a(f,4));b(/yy/g,a(parseInt(f.toString().slice(2),10),2));b(/MM/g,a(d,2));b(/M/g,d);b(/dd/g,a(i,2));b(/d/g,i);b(/HH/g,a(g,2));b(/H/g,g);b(/hh/g,a(g%12,2));b(/h/g,g%12);b(/mm/g,a(c,2));b(/m/g,c);b(/ss/g,a(h,2));b(/s/g,h);return e};String.prototype.getBytes=function(){var b=this.replace(/\n/g,"xx").replace(/\t/g,"x");var a=encodeURIComponent(b);return a.replace(/%[A-Z0-9][A-Z0-9]/g,"x").length};var getOuterHtmlEllipsis=function(d){var b=/(<[^>]+>)/g;var a=b.exec(d.outerHTML);var c=a?a[1]:d.outerHTML;c=c.length>40?c.substr(0,40)+"...":c;return c.replace(/</g,"&lt;").replace(/>/g,"&gt;")};var getOuterAndInnerHtmlEllipsis=function(b){var a=jQuery("<div></div>").append(b).html()};(function(){baidu.i18n={};baidu.i18n.getMessage=function(d,b){if(b){for(var c=0,a=b.length;c<a;c++){b[c]=""+b[c]}return chrome.i18n.getMessage(d,b)}else{return chrome.i18n.getMessage(d)}}})();const MSG_TYPE={BROWSER_CLICKED:"browser-clicked",GET_CSS:"get-css",GET_JS:"get-js",GET_HTML:"get-html",GET_COOKIE:"get-cookie",REMOVE_COOKIE:"remove-cookie",SET_COOKIE:"set-cookie",GET_OPTIONS:"get_options",SET_OPTIONS:"set_options",CSS_READY:"css-ready",JS_READY:"js-ready",HTML_READY:"html-ready",START_OPTION:"start-option",OPT_START_FCP:"opt-item-fcp",OPT_START_GRID:"opt-item-grid",CALC_PAGE_LOAD_TIME:"calc-page-load-time",GET_PAGE_WPO_INFO:"get_page_wpo_info",SHOW_PAGE_LOAD_TIME:"show-page-load-time",FCP_HELPER_DETECT:"fcp-helper-detect",GRID_DETECT:"grid-detect",JS_TRACKER:"js_tracker",CODE_COMPRESS:"code_compress",FROM_POPUP:"from_popup_action",REGEXP_TOOL:"regexp",EN_DECODE:"endecode",JSON_FORMAT:"jsonformat",QR_CODE:"qrcode",CODE_BEAUTIFY:"codebeautify",TIME_STAMP:"timestamp",IMAGE_BASE64:"imagebase64",AUTO_FORMART_PAGE_JSON:"opt_item_autojson"};const FILE={STYLE:"style",LINK:"link",SCRIPT:"script-block"};const PUBLIC_ID_WHITE_LIST={"":{systemIds:{"":true}},"-//W3C//DTD HTML 3.2 Final//EN":{systemIds:{"":true}},"-//W3C//DTD HTML 4.0//EN":{systemIds:{"":true,"http://www.w3.org/TR/html4/strict.dtd":true}},"-//W3C//DTD HTML 4.01//EN":{systemIds:{"":true,"http://www.w3.org/TR/html4/strict.dtd":true}},"-//W3C//DTD HTML 4.0 Transitional//EN":{systemIds:{"":true,"http://www.w3.org/TR/html4/loose.dtd":true}},"-//W3C//DTD HTML 4.01 Transitional//EN":{systemIds:{"":true,"http://www.w3.org/TR/html4/loose.dtd":true,"http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd":true}},"-//W3C//DTD XHTML 1.1//EN":{systemIds:{"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd":true}},"-//W3C//DTD XHTML Basic 1.0//EN":{systemIds:{"http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd":true}},"-//W3C//DTD XHTML 1.0 Strict//EN":{systemIds:{"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd":true}},"-//W3C//DTD XHTML 1.0 Transitional//EN":{systemIds:{"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd":true}},"ISO/IEC 15445:1999//DTD HyperText Markup Language//EN":{systemIds:{"":true}},"ISO/IEC 15445:2000//DTD HTML//EN":{systemIds:{"":true}},"ISO/IEC 15445:1999//DTD HTML//EN":{systemIds:{"":true}}};const COMPAT_MODE_DIFF_PUBLIC_ID_MAP={"-//W3C//DTD HTML 4.0 Transitional//EN":{systemIds:{"http://www.w3.org/TR/html4/loose.dtd":{IE:"S",WebKit:"Q"}}},"ISO/IEC 15445:2000//DTD HTML//EN":{systemIds:{"":{IE:"Q",WebKit:"S"}}},"ISO/IEC 15445:1999//DTD HTML//EN":{systemIds:{"":{IE:"Q",WebKit:"S"}}}};const HTML_DEPRECATED_TAGS={acronym:"定义首字母缩写",applet:"定义Java Applet",basefont:"定义Font定义",big:"定义大号文本",center:"定义居中的文本",dir:"定义目录列表",font:"定义文字相关",frame:"定义框架",frameset:"定义框架集",isindex:"定义单行的输入域",noframes:"定义noframe 部分",s:"定义加删除线的文本",strike:"定义加删除线的文本",tt:"定义打字机文本",u:"定义下划线文本",xmp:"定义预格式文本",layer:"定义层"};const HTML_DEPRECATED_ATTRIBUTES={align:{iframe:true,img:true,object:true,table:true},color:{font:true},height:{td:true,th:true},language:{script:true},noshade:{hr:true},nowrap:{td:true,th:true},size:{hr:true,font:true,basefont:true}};const BLOCK_HTML_ELEMENT=["address","blockquote","center","dir","div","dl","fieldset","form","h1","h2","h3","h4","h5","h6","hr","isindex","menu","noframes","noscript","ol","p","pre","table","ul"];const INLINE_HTML_ELEMENT=["a","acronym","b","bdo","big","br","cite","code","dfn","em","font","i","img","input","kbd","label","q","s","samp","select","small","span","strike","strong","sub","sup","textarea","tt","u","var"];const CHANGE_ABLE_HTML_ELEMENT=["applet","button","del","iframe","ins","map","object","script"];const CONDITIONAL_COMMENT_REGEXP=/\[\s*if\s+[^\]][\s\w]*\]/i;const NOT_IE_REVEALED_OPENING_CONDITIONAL_COMMENT_REGEXP=/^\[if\s+(!IE|false)\]$/i;const REVEALED_CLOSING_CONDITIONAL_COMMENT_REGEXP=/^\[endif\s*\]$/i;const NOT_IE_HIDDEN_CONDITIONAL_COMMENT_REGEXP=/^\[if\s+(!IE|false)\]>.*<!\[endif\]$/i;const REG={SCRIPT:/<script[^>]*>[\s\S]*?<\/[^>]*script>/gi,COMMENT:/<!--[\s\S]*?--\>/g,CSS_EXPRESSION:/expression[\s\r\n ]?\(/gi,TEXTAREA:/<textarea[^>]*>[\s\S]*?<\/[^>]*textarea>/gi,INVALID_TAG:/<\W+>/gi};const SELF_CLOSING_TAGS=["meta","link","area","base","col","input","img","br","hr","param","embed"];const HTML_DOM_MAX_DEPTH=30;const LOG={options_page_opened:"m_20111124_options_page_opened",options_page_btnsave:"m_20111124_options_page_btnsave",options_page_btnclose:"m_20111124_options_page_btnclose",popup_page_show:"m_20111124_popup_page_show",popup_page_fcp:"m_20111124_popup_page_fcp",popup_page_grid:"m_20111124_popup_page_grid",popup_page_fdp:"m_20111124_popup_page_fdp",popup_page_endecode:"m_20111124_popup_page_endecode",popup_page_loadtime:"m_20111124_popup_page_loadtime",endecode_page_opened:"m_20111124_endecode_page_opened",endecode_page_uniEncode:"m_20111124_endecode_page_uniEncode",endecode_page_uniDecode:"m_20111124_endecode_page_uniDecode",endecode_page_utf8Encode:"m_20111124_endecode_page_utf8Encode",endecode_page_utf8Decode:"m_20111124_endecode_page_utf8Decode",endecode_page_base64Encode:"m_20111124_endecode_page_base64Encode",endecode_page_base64Decode:"m_20111124_endecode_page_base64Decode",endecode_page_btnchange:"m_20111124_endecode_page_btnchange",endecode_page_btnclear:"m_20111124_endecode_page_btnclear",fdp_page_opened:"m_20111124_fdp_page_opened",fdp_page_spacedoc:"m_20111124_fdp_page_spacedoc",fdp_page_fedoc:"m_20111124_fdp_page_fedoc",fdp_page_btnsearch:"m_20111124_fdp_page_btnsearch",fcp_detect_show:"m_20111124_fcp_detect_show",fcp_detect_close:"m_20111124_fcp_detect_close",fcp_detect_min:"m_20111124_fcp_detect_min",fcp_detect_max:"m_20111124_fcp_detect_max",fcp_detect_morehtml:"m_20111124_fcp_detect_morehtml",fcp_detect_morecss:"m_20111124_fcp_detect_morecss",fcp_detect_morejs:"m_20111124_fcp_detect_morejs",grid_detect_show:"m_20111124_grid_detect_show",grid_detect_esc:"m_20111124_grid_detect_esc",grid_detect_btnclose:"m_20111124_grid_detect_btnclose",fehelper_user_count:"m_20111124_fehelper_user_count"};baidu.feOption=(function(){var d=function(o){for(var p in o){window.localStorage.setItem(p,o[p])}};var f=function(p){var r={};for(var q=0,o=p.length;q<o;q++){r[p[q]]=window.localStorage.getItem(p[q])}return r};var l=function(o,p){chrome.extension.sendMessage({type:MSG_TYPE.GET_OPTIONS,items:o},p)};var j=function(o){chrome.extension.sendMessage({type:MSG_TYPE.SET_OPTIONS,items:o})};var a=function(o,p){if(p&&typeof p=="function"){p.call(null,f(o))}};var n=function(o){d(o)};var b=function(o){return f([o])[o]};var c=function(){var o={};o.opt_item_contextMenus=$("#opt_item_contextMenus").attr("checked");o.opt_item_showfdpmenu=$("#opt_item_showfdpmenu").attr("checked");o.opt_item_autojson=$("#opt_item_autojson").attr("checked");o.opt_item_notification=$("#opt_item_notification").val();j(o)};var k=function(){var o=["opt_item_contextMenus","opt_item_showfdpmenu","opt_item_autojson","opt_item_notification"];l(o,function(p){$.each(o,function(q,r){if(q==3){$("#"+r).val(p[r])}else{if(p[r]==="true"){$("#"+r).attr("checked","checked")}}})})};var e=function(o){switch(o){case"opt_form_start":c();break;case"":break}};var i=function(){chrome.tabs.query({active:true,currentWindow:true},function(o){var p=o[0];chrome.tabs.remove(p.id)})};var h=function(){$("#fe-opt-list-item>li").click(function(p){var o=$(this).siblings().removeClass("selected").end().addClass("selected");$(o.attr("data-content")).siblings().removeClass("selected").addClass("fe-hide").end().removeClass("fe-hide").addClass("selected")});$(".right form").submit(function(o){e($(this).attr("id"));i();o.preventDefault();o.stopPropagation()});$("#btn_close").click(function(){i()});$("#btn_save").click(function(){$(".right div.selected form").submit()})};var m=function(){k()};var g=function(){h();m()};return{init:g,doSetOptions:n,doGetOptions:a,getOptionItem:b,getOptions:l,setOptions:j}})();baidu.namespace.register("baidu.FL");baidu.FL=new (function(){this.FL_EOF=1;this.FL_TPL_DELIMITER=2;this.FL_NEW_LINE=3;this.FL_NORMAL=4;this.HTML_CONTENT=111;this.HTML_TAG=112;this.HTML_JS_START=113;this.HTML_JS_CONTENT=114;this.HTML_JS_END=115;this.HTML_CSS_START=116;this.HTML_CSS_CONTENT=117;this.HTML_CSS_END=118;this.HTML_IE_HACK_START=119;this.HTML_IE_HACK_EDN=120;this.HTML_DOC_TYPE=121;this.HTML_COMMENT=122;this.HTML_STATUS_OK=123;this.HTML_TAG_START=124;this.HTML_TAG_END=125;this.HTML_TPL_ATTR_NAME=126;this.HTML_XML=127;this.HTML_TEXTAREA_START=128;this.HTML_TEXTAREA_CONTENT=129;this.HTML_TEXTAREA_END=130;this.HTML_PRE_START=131;this.HTML_PRE_CONTENT=132;this.HTML_PRE_END=133;this.JS_START_EXPR=211;this.JS_END_EXPR=212;this.JS_START_BLOCK=213;this.JS_END_BLOCK=214;this.JS_SEMICOLON=215;this.JS_WORD=216;this.JS_OPERATOR=217;this.JS_EQUALS=218;this.JS_INLINE_COMMENT=219;this.JS_BLOCK_COMMENT=220;this.JS_COMMENT=221;this.JS_STRING=222;this.JS_IE_CC=223;this.JS_REGEXP=224;this.JS_MODE_EXPRESSION=250;this.JS_MODE_INDENT_EXPRESSION=251;this.JS_MODE_DO_BLOCK=252;this.JS_MODE_BLOCK=253;this.JS_MODE_ARRAY=254;this.CSS_AT=311;this.CSS_NORMAL=312;this.CSS_DEVICE_DESC=313;this.CSS_DEVICE_START=314;this.CSS_DEVICE_END=315;this.CSS_SELECTOER=316;this.CSS_SELECTOER_START=317;this.CSS_SELECTOER_END=318;this.CSS_COMMENT=319;this.CSS_PROPERTY=320;this.CSS_VALUE=321;this.CSS_SEMICOLON=322;this.CSS_COLON=323})();baidu.namespace.register("baidu.cssAnalytic");baidu.cssAnalytic=function(){this.parsePos=0;this.content="";this.contentLength=0;this._output=[];this._pre_type="";this.run=function(a){this.content=a.trim().replace(/\n/g,"\n");this.contentLength=this.content.length;this.tokenAnalytic();return this._output};this.tokenAnalytic=function(){var a;while(true){a=this.getNextToken();if(a){if(a[1]===baidu.FL.FL_EOF){break}this._output.push(a);if(a[1]===baidu.FL.CSS_PROPERTY){this._output.push([":",baidu.FL.CSS_COLON])}else{if(a[1]===baidu.FL.CSS_VALUE){this._output.push([";",baidu.FL.CSS_SEMICOLON])}}}}};this.getNextToken=function(){if(this.parsePos>=this.contentLength){return["",baidu.FL.FL_EOF]}$char=this.content[this.parsePos];this.parsePos++;if($char==="\x0d"){return""}if($char==="\x0a"){return[$char,baidu.FL.FL_NEW_LINE]}if($char.trim()===""||$char===";"){return""}var d;if($char==="@"){d=this._getAtToken($char);if(d){return d}}else{if($char==="{"){switch(this._pre_type){case baidu.FL.CSS_DEVICE_DESC:this._pre_type=baidu.FL.CSS_DEVICE_START;return[$char,baidu.FL.CSS_DEVICE_START];default:this._pre_type=baidu.FL.CSS_SELECTOER_START;return[$char,baidu.FL.CSS_SELECTOER_START]}}else{if($char==="}"){switch(this._pre_type){case baidu.FL.CSS_SELECTOER_END:this._pre_type=baidu.FL.CSS_DEVICE_END;return[$char,baidu.FL.CSS_DEVICE_END];default:for(var e=this._output.length-1;e>=0;e--){var c=this._output[e];if(c[1]===baidu.FL.CSS_SELECTOER_START){this._pre_type=baidu.FL.CSS_SELECTOER_END;return[$char,baidu.FL.CSS_SELECTOER_END]}else{if(c[1]===baidu.FL.CSS_DEVICE_START){this._pre_type=baidu.FL.CSS_DEVICE_END;return[$char,baidu.FL.CSS_DEVICE_END]}}}this._pre_type=baidu.FL.CSS_SELECTOER_END;return[$char,baidu.FL.CSS_SELECTOER_END]}}else{if(this.content.substr(this.parsePos-1,2)==="/*"){d=this._getCommentToken($char);if(d){return d}}else{if($char==="\x0d"||$char==="\x0a"){return[$char,baidu.FL.FL_NEW_LINE]}}}}}switch(this._pre_type){case baidu.FL.CSS_SELECTOER_START:case baidu.FL.CSS_VALUE:d=this._getPropertyToken($char);this._pre_type=baidu.FL.CSS_PROPERTY;return d;case baidu.FL.CSS_PROPERTY:d=this._getValueToken($char);this._pre_type=baidu.FL.CSS_VALUE;return d;case baidu.FL.CSS_DEVICE_START:var b=this.parsePos;d=this._getPropertyToken($char);var a=d[0];if(a.indexOf("{")>-1){this.parsePos=b;d=this._getSelectorToken($char);this._pre_type=baidu.FL.CSS_DEVICE_START;if(d){return d}}else{this._pre_type=baidu.FL.CSS_PROPERTY;return d}default:d=this._getSelectorToken($char);if(d){return d}}return[$char,baidu.FL.CSS_NORMAL]};this._getAtToken=function(a){$resultString=a;while(this.content[this.parsePos]!==";"&&this.content[this.parsePos]!=="{"&&this.parsePos<this.contentLength){$resultString+=this.content[this.parsePos];this.parsePos++}if(this.content[this.parsePos]===";"){$resultString+=";";this.parsePos++;return[$resultString.trim(),baidu.FL.CSS_AT]}this._pre_type=baidu.FL.CSS_DEVICE_DESC;return[$resultString.trim(),baidu.FL.CSS_DEVICE_DESC]};this._getCommentToken=function(a,b){this.parsePos++;$resultString="";while(!(this.content[this.parsePos]==="*"&&this.content[this.parsePos+1]&&this.content[this.parsePos+1]==="/")&&this.parsePos<this.contentLength){$resultString+=this.content[this.parsePos];this.parsePos++}this.parsePos+=2;if(b){return"/*"+$resultString+"*/"}return["/*"+$resultString+"*/",baidu.FL.CSS_COMMENT]};this._getSelectorToken=function(a){var b=a;while(this.content[this.parsePos]!=="{"&&this.content[this.parsePos]!=="}"&&this.parsePos<this.contentLength){if(this.content[this.parsePos]==="/"&&this.content[this.parsePos+1]&&this.content[this.parsePos+1]==="*"){b+=this._getCommentToken("/",true)}else{b+=this.content[this.parsePos];this.parsePos++}}return[b.trim(),baidu.FL.CSS_SELECTOER]};this._getPropertyToken=function(a){$resultString=a;while(this.content[this.parsePos]!==":"&&this.content[this.parsePos]!==";"&&this.content[this.parsePos]!=="}"&&this.parsePos<this.contentLength){$resultString+=this.content[this.parsePos];this.parsePos++}if(this.content[this.parsePos]!=="}"){this.parsePos++}return[$resultString.trim().toLowerCase(),baidu.FL.CSS_PROPERTY]};this._getValueToken=function(a){var c=a;var b=false;while(this.content[this.parsePos]!==";"&&this.content[this.parsePos]!=="}"&&this.parsePos<this.contentLength){a=this.content[this.parsePos];this.parsePos++;c+=a;if(!b&&c.toLowerCase()==="expression("){b=true;c+=this._getJSToken()}}if(this.content[this.parsePos]===";"){this.parsePos++}c=c.trim().replace(/\s+/ig," ");return[c,baidu.FL.CSS_VALUE]};this._getJSToken=function(){var b="",a;while(this.parsePos<this.contentLength){a=this.content[this.parsePos];this.parsePos++;b+=a;if(a===")"&&this._checkJSToken("("+b)){break}}return b};this._checkJSToken=function(d){var e=0;var c=0;for(var f=0,b=d.length;f<b;f++){var a=d[f];if(a[0]==="("){e++}else{if(a[0]===")"){c++}}}return e===c}};baidu.namespace.register("baidu.css");baidu.css=(function(){var s=null;var d=null;var G=null;var z=0;var D=null;var B=[];var y=null;var n=function(L){s={curIndex:0,queen:[],callback:new Function(),finished:L};d={}};var e=function(){y={styles:[],cssMinified:{files:[],count:0},backgroundImages:[],expressions:[],duplicatedFiles:[]}};var A=function(){G={matched:{count:0,selectors:[]},unmatched:{count:0,selectors:[]},ignored:{count:0,selectors:[]}}};var k=function(L){s.queen.push(L)};var c=function(){return s.queen[s.curIndex]};var i=function(){return(s.curIndex==s.queen.length)};var I=function(){s.curIndex+=1};var f=function(){return s.finished};var l=function(N){var L=/(.*\/)([^\/]+\.css)/;var M=L.exec((N||"").replace(/\?.*/,""));D=M?M[1]:""};var u=function(){return D||""};var v=function(N){var L=/(.*\/)([^\/]+\.css)/;var M=L.exec((N||"").replace(/\?.*/,""));return M?M[2]:"style块"+ ++z};var m=function(O,N){N=N.replace(/\/\*[\S\s]*?\*\//g,"");var L=v(O);B.push({href:O?O:"#",fileName:L,fileContent:N});try{var M=/@import\s+url\(\s*(\"|\')(.*)\1\s*\)(\s*;)?/ig;N.replace(M,function(R,Q,S){k({link:{href:u()+S},style:null})})}catch(P){}};var j=function(M){if(M.indexOf("http://")!=0){M=M.replace(/['"]/g,"");var L=u();if(M.indexOf("/")==0){L=""}else{if(M.indexOf("./")==0){M=M.substr(2)}else{if(M.indexOf("../")==0){M=M.substr(3);if(L.lastIndexOf("/")==L.length-1){L=L.substr(0,L.length-1)}L=L.substr(0,L.lastIndexOf("/")+1)}}}M=L+M}return M};var b=function(M,O){var N=/(background|background-image):(?:[\#\w]+\s+)?url\(([^\)]*)\)/ig;var L=[];O.replace(/\/\*[\S\s]*?\*\//g,"").replace(/\r?\n/,"").replace(/\s+\'|\"/g,"").replace(N,function(Q,P,R){R=R.replace(/\?.*/,"");L.push(j(R))});if(L.length){y.backgroundImages.push({fileName:M,bgImages:L})}};var E=function(M,O){var N=/:expression\(/ig;var L=O.replace(/\/\*[\S\s]*?\*\//g,"").replace(/\r?\n/,"").replace(/\s+/g,"").split(N);if(L.length-1){y.expressions.push({fileName:M,count:L.length-1})}};var o=function(N){var L=N.fileContent.split(/\n/);var M=N.fileContent.length/L.length;if(M<150&&L.length>1){y.cssMinified.count++;y.cssMinified.files.push({href:N.href,fileName:N.fileName})}};var C=function(L){var M=(function(){var N={link:[],style:[]};jQuery.each(L,function(P,O){if(!!O.href){N.link.push(O)}else{N.style.push(O)}});return N})();return M};var K=function(L){l(L.href);chrome.extension.sendMessage(null,{type:MSG_TYPE.GET_CSS,link:L.href},function(M){m(M.path,M.content);g()})};var r=function(L){m("",L.ownerNode.innerText);g()};var g=function(){var L=c();if(f()||!L){chrome.extension.sendMessage({type:MSG_TYPE.CSS_READY});return}I();if(i()){n(true)}if(!!L.style){r(L.style)}else{if(!!L.link){K(L.link)}}};var t=function(){styleheets=C(document.styleSheets);if(styleheets.style&&styleheets.style.length>0){jQuery.each(styleheets.style,function(L,M){k({link:null,style:M})})}if(styleheets.link&&styleheets.link.length>0){jQuery.each(styleheets.link,function(L,M){k({link:M,style:null})})}g()};var x=function(){return[{type:0,count:G.unmatched.count,content:G.unmatched.selectors},{type:1,count:G.ignored.count,content:G.ignored.selectors},{type:2,count:G.matched.count,content:G.matched.selectors}]};var H=function(){var L=false;jQuery.each(B,function(M,N){q(N)})};var q=function(L){var P=L.fileName;var O=L.fileContent;o(L);E(P,O);b(P,O);var N=(new baidu.cssAnalytic()).run(O);var M=h(N);A();jQuery.each(M,function(Q,R){if(R.selector){a(R.selector,R.csstext)}});y.styles.push({path:P,content:x()})};var h=function(S){var R=[],M="",T=[],O;for(var N=0,P=S.length;N<P;N++){var U=S[N];if(U[1]==baidu.FL.FL_NEW_LINE){continue}else{if(U[1]==baidu.FL.CSS_DEVICE_DESC){M=U[0];O=baidu.FL.CSS_DEVICE_START;continue}else{if(U[1]==baidu.FL.CSS_SELECTOER){M=U[0];O=baidu.FL.CSS_SELECTOER_START;continue}else{if(U[1]==baidu.FL.CSS_AT){M=U[0]}else{var L=N;for(;L<P;L++){var Q=S[L];if(U[1]==baidu.FL.CSS_AT){L--;break}else{if(Q[1]==baidu.FL.CSS_DEVICE_END&&O==baidu.FL.CSS_DEVICE_START){T.push(Q[0]);break}else{if(Q[1]==baidu.FL.CSS_SELECTOER_END&&O==baidu.FL.CSS_SELECTOER_START){T.push(Q[0]);break}else{T.push(Q[0])}}}}N=L}}}}R.push({selector:M,csstext:T.join("")});T=[];O=""}return R};var a=function(M,S){var O=M.replace(/\r?\n/g,"").trim().split(",");var R="",L;var Q=/^([\*\+]+[^ ]+)[ ]+(.*)$/;var N=/([^:]+)(:hover|:focus|:visited|:link|:active|:before|:after|::)/;var P;jQuery.each(O,function(V,T){R=T;L=Q.exec(T);if(L&&L[1]&&L[2]){T=L[2]}var X=false;if(T.indexOf("@")>-1||T.indexOf("-moz-")>-1){d[T]=1}else{if(!d[T]){var U=N.exec(T);if(U&&U[1]){X=true;T=U[1]}try{d[T]=jQuery(T+':not("[id^=fe-helper-],[id^=fe-helper-] '+T+'")').length}catch(W){d[T]=0}}}P=d[T]?X?"ignored":"matched":"unmatched";G[P].count++;G[P].selectors.push({selector:R,cssText:S})})};var p=function(){H()};var J=function(){styleheets=C(document.styleSheets);var N={};var M=[];var L={};if(styleheets.link&&styleheets.link.length>0){jQuery.each(styleheets.link,function(O,P){N[P.href]=parseInt(N[P.href]||0,10)+1});jQuery.each(N,function(O,Q){if(Q>1){M.push({href:O,count:Q})}else{var P="";var R=[];jQuery.each(B,function(T,S){if(S.href==O){P=S.fileContent.replace(/\s+/g,"");return false}});jQuery.each(B,function(T,S){if(P==S.fileContent.replace(/\s+/g,"")&&!L[S.href]&&R.join(",").indexOf(S.href)==-1){R.push(S.href)}});if(R.length>1){M.push({href:O,dupFiles:R});L[O]=true}}})}y.duplicatedFiles=M};var F=function(){n(false);t()};var w=function(L){e();p();J();if(L&&typeof L=="function"){L.call(null,y)}};return{init:F,detect:w}})();baidu.namespace.register("baidu.htmlAnalytic");baidu.htmlAnalytic=function(){this.parsePos=0;this.content="";this.contentLength=0;this.singleTag=["br","input","link","meta","!doctype","basefont","base","area","hr","wbr","param","img","isindex","?xml","embed"];this.closeTagWhiteList=["html","body","li","tr","td"];this._output=[];this.__construct=function(){};this.run=function(b,a){if(a==undefined){a=1}this.content=b.trim().replace(/\r\n/g,"\n");if(this.content.indexOf("<?xml")>-1){return[[b,baidu.FL.HTML_XML]]}this.contentLength=this.content.length;if(a===1){this.tokenAnalytic();return this._output}return this.getTagAttributes(b)};this.tokenAnalytic=function(){var a;while(true){a=this.getNextToken();if(a){if(a[1]===baidu.FL.FL_EOF){break}this._output.push(a)}}};this.getNextToken=function(){if(this.parsePos>=this.contentLength){return["",baidu.FL.FL_EOF]}var a=this.content[this.parsePos];this.parsePos++;var d=this._output.length;var c;if(d){var b=this._output[d-1][1];if(b===baidu.FL.HTML_JS_START){c=this._getScriptOrStyleContent(a,1);if(c){return c}}else{if(b===baidu.FL.HTML_CSS_START){c=this._getScriptOrStyleContent(a,2);if(c){return c}}else{if(b===baidu.FL.HTML_TEXTAREA_START){c=this._getTextareaOrPreContent(a,1);if(c){return c}}else{if(b===baidu.FL.HTML_PRE_START){c=this._getTextareaOrPreContent(a,2);if(c){return c}}}}}}if(a==="\x0d"){return""}if(a==="\x0a"){return[a,baidu.FL.FL_NEW_LINE]}if(a==="<"&&this.content[this.parsePos]!=="<"){c=this._getTagToken(a);if(c){return c}}c=this._getContentToken(a);if(c){return c}return[a,baidu.FL.FL_NORMAL]};this._getTagToken=function(a){var b=a;do{if(this.parsePos>=this.contentLength){break}a=this.content[this.parsePos];this.parsePos++;if(a==='"'||a==="'"){if(b[1]!=="!"){b+=a;b+=this._getUnformated(a)}}else{b+=a}}while(a!==">");if(b[1]==="!"){if(b.indexOf("[if")>-1){if(b.indexOf("!IE")>-1){b+=this._getUnformated("-->",b)}return[b,baidu.FL.HTML_IE_HACK_START]}else{if(b.indexOf("[[endif")>-1){return[b,baidu.FL.HTML_IE_HACK_EDN]}else{if(this._checkEqual(b,2,7,"doctype")){return[b,baidu.FL.HTML_DOC_TYPE]}else{if(this._checkEqual(b,4,6,"status")){b+=this._getUnformated("-->",b);return[b,baidu.FL.HTML_STATUS_OK]}else{b+=this._getUnformated("-->",b);return[b,baidu.FL.HTML_COMMENT]}}}}}if(this._checkEqual(b,0,7,"<script")){return[b,baidu.FL.HTML_JS_START]}else{if(this._checkEqual(b,0,9,"<\/script>")){return[b,baidu.FL.HTML_JS_END]}else{if(this._checkEqual(b,0,6,"<style")){return[b,baidu.FL.HTML_CSS_START]}else{if(this._checkEqual(b,0,8,"</style>")){return[b,baidu.FL.HTML_CSS_END]}else{if(this._checkEqual(b,0,9,"<textarea")){return[b,baidu.FL.HTML_TEXTAREA_START]}else{if(this._checkEqual(b,0,11,"</textarea>")){return[b,baidu.FL.HTML_TEXTAREA_END]}else{if(this._checkEqual(b,0,4,"<pre")){return[b,baidu.FL.HTML_PRE_START]}else{if(this._checkEqual(b,0,6,"</pre>")){return[b,baidu.FL.HTML_PRE_END]}}}}}}}}if(this._checkEqual(b,0,2,"</")){return[b,baidu.FL.HTML_TAG_END]}return[b,baidu.FL.HTML_TAG_START]};this._checkEqual=function(a,d,b,c){return a.substr(d,b).toLowerCase()===c.toLowerCase()};this._getContentToken=function(a){var b=a;while(true){if(this.parsePos>=this.contentLength){break}if(this.content[this.parsePos]==="<"&&this.content[this.parsePos+1]&&this.content[this.parsePos+1]!=="<"&&this.content[this.parsePos+1]!==">"){break}b+=this.content[this.parsePos];this.parsePos++}return[b,baidu.FL.HTML_CONTENT]};this._getUnformated=function(a,b){if(b==undefined){b=""}if(b.indexOf(a)>-1){return""}var c="";do{if(this.parsePos>=this.contentLength){break}$c=this.content[this.parsePos];c+=$c;this.parsePos++}while(c.indexOf(a)==-1);if(a.length===1){while(a===this.content[this.parsePos]){c+=this.content[this.parsePos];this.parsePos++}}return c};this._getScriptOrStyleContent=function(a,b){var e=b==1?"<\/script>":"</style>";var d=e.length;if(this.content.substr(this.parsePos-1,d).toLowerCase()===e){return""}var h=a;while(this.parsePos<this.contentLength){if(this.content.substr(this.parsePos,d).toLowerCase()===e){break}else{h+=this.content[this.parsePos];this.parsePos++}}h=h.trim();var c=["<!--","/*<![CDATA[*/","//<![CDATA["];var f=["//-->","/*]]>*/","//]]>"];for(var g in c){if(h.indexOf(g)===0){h=h.substr(g.length);break}}for(var g in f){if(h.indexOf(g)===(h.length-g.length)){h=h.substr(0,h.length-g.length);break}}return[h.trim(),b===1?baidu.FL.HTML_JS_CONTENT:baidu.FL.HTML_CSS_CONTENT]};this._getTextareaOrPreContent=function(a,b){var d=b==1?"</textarea>":"</pre>";var c=d.length;if(this.content.substr(this.parsePos-1,c).toLowerCase()===d){return""}var e=a;while(this.parsePos<this.contentLength){if(this.content.substr(this.parsePos,c).toLowerCase()===d){break}else{e+=this.content[this.parsePos];this.parsePos++}}return[e.trim(),b===1?baidu.FL.HTML_TEXTAREA_CONTENT:baidu.FL.HTML_PRE_CONTENT]};this.getTagAttributes=function(c){var c=c.trim();if(c.substr(0,2)==="</"){return[baidu.FL.HTML_TAG_END,c.substr(2,c.length-3).trim()]}var b=[baidu.FL.HTML_TAG_START,"",[]];this.parsePos=1;this.contentLength=c.replace(/^>\/|>\/$/g,"").length;var a="";while(true){if(this.parsePos>=this.contentLength){break}$char=this.content[this.parsePos];this.parsePos++;if(!/^[a-z0-9]{1}$/g.test($char)){this.parsePos--;break}else{a+=$char}}b[1]=a;var e=$name="";while(true){if(this.parsePos>=this.contentLength){break}$char=this.content[this.parsePos];this.parsePos++;var d;if($char==='"'||$char==="'"){d=$char+this._getUnformated($char);b[2].push([$name,d])}else{if($char==="="){$name=e;e=""}else{if($char===" "){if(e){if($name){b[2].push([$name,e])}else{b[2].push([e,""])}}$name=e=""}else{if($char!==" "&&$char!="\n"&&$char!="\r"&&$char!="\t"){e+=$char}}}}}if(e){if($name){b[2].push([$name,e])}else{b[2].push([e,""])}}return b};this._in_array=function(d,b){for(var c=0,a=d.length;c<a;c++){if(b.trim()==d[c]){return true}}return false};this._getTagName=function(e,a){var b=/^<([^\s\/>]+)\s*\/?/g;var d=/^<\/([^\s]+)>/g;var c=(a==0?b:d).exec(e);return c?c[1]:""};this.getUnclosedTags=function(f){Array.prototype.remove=function(l){for(var i=this.length-1;i>=0;i--){if(l==this[i].tagName){this.splice(i,1);return true}}return false};var d=this.run(f);var a=[];for(var c=0,e=d.length;c<e;c++){if(d[c][1]===baidu.FL.HTML_PRE_START||d[c][1]===baidu.FL.HTML_PRE_END||d[c][1]===baidu.FL.HTML_TEXTAREA_START||d[c][1]===baidu.FL.HTML_TEXTAREA_END||d[c][1]===baidu.FL.HTML_TAG_START||d[c][1]===baidu.FL.HTML_TAG_END||d[c][1]===baidu.FL.HTML_XML){a.push(d[c])}}var k="";var j=[];var b=[];for(var c=0,e=a.length;c<e;c++){if(a[c][1]!==baidu.FL.HTML_PRE_END&&a[c][1]!==baidu.FL.HTML_TEXTAREA_END&&a[c][1]!==baidu.FL.HTML_TAG_END){k=this._getTagName(a[c][0],0);b.push({tagName:k,outerHTML:a[c][0],type:1})}else{k=this._getTagName(a[c][0],1);if(!b.remove(k)){j.push({tagName:k,outerHTML:a[c][0],type:0})}}}var g=[],h=b.concat(j);for(var c=0,e=h.length;c<e;c++){if((!this._in_array(this.singleTag,h[c].tagName.toLowerCase())||h[c].type==0)&&!this._in_array(this.closeTagWhiteList,h[c].tagName.toLowerCase())){g.push(h[c])}}return g}};baidu.namespace.register("baidu.doctype");baidu.doctype=(function(){var e={IE:"Q",WebKit:"Q",hasCommentBeforeDTD:false,hasConditionalCommentBeforeDTD:false,isUnusualDocType:false,hasDocType:false};function c(k,l,j){if(k.toLowerCase()=="\"xmlns:xsl='http://www.w3.org/1999/xsl/transform'\""&&l==""&&j==""){e.IE="S";e.WebKit="Q";e.isUnusualDocType=false}}function f(j){return CONDITIONAL_COMMENT_REGEXP.test(j)}function h(j){return NOT_IE_HIDDEN_CONDITIONAL_COMMENT_REGEXP.test(j)}function a(j){return REVEALED_CLOSING_CONDITIONAL_COMMENT_REGEXP.test(j)}function b(j){return NOT_IE_REVEALED_OPENING_CONDITIONAL_COMMENT_REGEXP.test(j)}function g(k){var j=k.previousSibling;for(;j;j=j.previousSibling){if(b(j.nodeValue)){return j}}return null}function i(){var j={hasCommentBeforeDTD:false,hasConditionalCommentBeforeDTD:false};var k=document.doctype;if(!k){return j}var m=k.previousSibling;for(;m;m=m.previousSibling){if(m.nodeType==Node.COMMENT_NODE){var l=m.nodeValue;if(a(l)){m=g(m);if(m){j.hasConditionalCommentBeforeDTD=true;return j}continue}var n=f(l);if(!n){j.hasCommentBeforeDTD=true;continue}if(h(l)){j.hasConditionalCommentBeforeDTD=true}}}return j}function d(){var l=document.doctype;var n=document.compatMode.toLowerCase();e.hasDocType=(l)?true:false;e.WebKit=(n=="backcompat")?"Q":"S";e.IE=e.WebKit;if(!l){return}var m=l?l.name.toLowerCase():"";var o=l?l.publicId:"";var k=l?l.systemId:"";if(m!="html"){e.IE=undefined;e.isUnusualDocType=true}else{if(o in PUBLIC_ID_WHITE_LIST){if(!(k in PUBLIC_ID_WHITE_LIST[o].systemIds)){e.IE=undefined;e.isUnusualDocType=true}}else{e.IE=undefined;e.isUnusualDocType=true}}if((o in COMPAT_MODE_DIFF_PUBLIC_ID_MAP)&&(k in COMPAT_MODE_DIFF_PUBLIC_ID_MAP[o].systemIds)){e.IE=COMPAT_MODE_DIFF_PUBLIC_ID_MAP[o].systemIds[k].IE;e.isUnusualDocType=false}c(m,o,k);if(e.IE!="Q"){var j=i();if(j.hasConditionalCommentBeforeDTD){e.IE=undefined;e.hasConditionalCommentBeforeDTD=true}else{if(j.hasCommentBeforeDTD){e.IE="Q";e.hasCommentBeforeDTD=true}}}}return{getDocMode:function(){d();return e}}})();baidu.namespace.register("baidu.html");baidu.html=(function(){var s="";var p=null;var a=function(){p={HTMLBase:{HTMLDeprecatedAttribute:{},HTMLDeprecatedTag:{}},documentMode:{hasDocType:false,compatMode:{IE:"Q",WebKit:"Q"},publicId:"",hasComment:false,hasConditionalComment:false,isUnusualDocType:false},DOM:{IECondComm:[],FFNotSptComm:[],allComm:[],count:0,invalidInput:{count:0,input:[]},maxDepth:{xpath:"",depth:1}},title:[],LINK:{notInHead:[]},ID:{ids:{},count:0},tagInclude:[],unClosedTags:[],htmlMinified:true,imgTag:[]}};var u=function(x){return HTML_DEPRECATED_TAGS[x.toLowerCase()]};var t=function(y,x){y=y.toLowerCase();x=x.toLowerCase();return(HTML_DEPRECATED_ATTRIBUTES[x]&&HTML_DEPRECATED_ATTRIBUTES[x][y])};var e=function(z){var y=z.tagName.toLowerCase();if(u(y)){var x=p.HTMLBase.HTMLDeprecatedTag;if(!x[y]){x[y]=0}x[y]++}};var i=function(C){var B=C.tagName.toLowerCase();var x=C.attributes;var z=p.HTMLBase.HTMLDeprecatedAttribute;for(var y=0,D=x.length;y<D;++y){var A=x[y].name;if(t(B,A)){if(!z[A]){z[A]={}}if(!z[A][B]){z[A][B]=0}z[A][B]++}}};var g=function(z,x){var B=document.createNodeIterator(z,x,null,false);var y=[];var A=B.nextNode();while(A){y.push(A);A=B.nextNode()}return y};var o=function(){var x=g(document.documentElement,NodeFilter.SHOW_COMMENT);var C=/\[\s*if\s*[^\]][\s\w]*\]/i;var A=/--/g;for(var z=0,B=x.length;z<B;++z){var y=x[z];if(C.test(y.nodeValue)){p.DOM.IECondComm.push(y.nodeValue)}if(A.test(y.nodeValue)){p.DOM.FFNotSptComm.push(y.nodeValue)}p.DOM.allComm.push(y.nodeValue)}};var v=function(){p.documentMode=baidu.doctype.getDocMode()};var n=function(y){var x=p.ID;for(var z in y){if(y[z]>1){x.ids[z]=y[z];x.count++}}};var q=function(B){if(B.nodeType!==1||!B.tagName){return}if(B.id==="fe-helper-tab-box"||B.id==="fe-helper-pb-mask"){return}var C=p.DOM.maxDepth;var A=0;var y,x=[];do{if(B.id==="fe-helper-tab-box"||B.id==="fe-helper-pb-mask"){return}if(B.tagName.toLowerCase()=="svg"){continue}try{if(B.id){y=B.tagName.toLowerCase()+'<span style="color:red;">#'+B.id+"</span>"}else{if(B.className){y=B.tagName.toLowerCase()+'<span style="color:green;">.'+B.className.split(/\s+/).join(".")+"</span>"}else{y=B.tagName.toLowerCase()}}}catch(z){continue}A++;x.unshift(y)}while((B=B.parentNode)&&B.nodeType===1);if(A>C.depth){C.depth=A;C.xpath=x.join('<span style="color:gray;">&gt;</span>')}};var w=function(){var B=g(document.documentElement,NodeFilter.SHOW_ELEMENT);p.DOM.count=B.length;var y={};for(var A=0,x=B.length;A<x;++A){var z=B[A];e(z);i(z);q(z);if(!!z.id){if(!y[z.id]){y[z.id]=0}y[z.id]++}}n(y)};var m=function(){var y=document.querySelectorAll("link");var z=document.querySelectorAll("head link");var x=[];jQuery.each(y,function(B,C){var A=true;jQuery.each(z,function(E,D){if(C.href==D.href){A=false}});A?x.push(C):false});p.LINK.notInHead=x};var h=function(){var y=document.querySelectorAll("title");var z=document.querySelectorAll("head title");var x=false;var A=[];jQuery.each(y,function(C,B){x=false;jQuery.each(z,function(E,D){if(B==D){x=true;return false}});A.push({dom:B,isInHead:x})});p.title=A};var j=function(){var y=document.querySelectorAll("img[src]");var z=[];var A=/.*src=\"(.*)\".*/;var x=[];jQuery.each(y,function(C,B){x=A.exec(B.outerHTML);if(!x||x[1].trim()==""){z.push(B)}});p.imgTag=z};var r=function(){var x=document.querySelectorAll("input[type=text],input[type=password]");var y=p.DOM.invalidInput;jQuery.each(x,function(A,z){if(z.getAttribute("size")){y.count++;y.input.push(z)}})};var d=function(){var y=p.tagInclude;var z=null;var x=null;jQuery.each(INLINE_HTML_ELEMENT,function(B,A){jQuery.each(BLOCK_HTML_ELEMENT,function(C,D){z=document.querySelectorAll(A+">"+D);if(z.length>0){x=getOuterHtmlEllipsis(z[0].parentNode);jQuery.each(z,function(E,F){y.push({inline:x,block:getOuterHtmlEllipsis(F)})})}})})};var b=function(){var y=s;var z=new baidu.htmlAnalytic();var A=z.getUnclosedTags(y);for(var x=0;x<A.length;x++){p.unClosedTags.push(A[x].outerHTML.replace(/</g,"&lt;").replace(/>/g,"&gt;"))}};var c=function(){var x=s.split(/\n/);var y=s.length/x.length;if(y<150){p.htmlMinified=false}};var l=function(x){chrome.extension.sendMessage({type:MSG_TYPE.GET_HTML,link:location.href.split("#")[0]},function(y){s=y.content;chrome.extension.sendMessage({type:MSG_TYPE.HTML_READY});x&&x()})};var k=function(x){l(x)};var f=function(x){a();w();h();m();j();v();o();r();d();b();c();if(x&&typeof x=="function"){x.call(null,p)}};return{init:k,detect:f}})();baidu.namespace.register("baidu.js");baidu.js=(function(){var y=null;var d=0;var B=0;var s=[];_cookies=[];var m=null;var g=function(D){y={curIndex:0,queen:[],callback:new Function(),finished:D}};var A=function(D){y.queen.push(D)};var i=function(){return y.queen[y.curIndex]};var o=function(){return(y.curIndex==y.queen.length)};var n=function(){y.curIndex+=1};var l=function(){return y.finished};var w=function(F){var D=/(.*\/)([^\/]+\.js)/;var E=D.exec((F||"").replace(/\?.*/,""));return E?E[2]:F?("异步接口"+ ++d):("script块"+ ++B)};var b=function(){m={cookies:[],scriptTag:{scriptBlock:0,scriptSrc:0},domain:false,jsMinified:{files:[],count:0},tangram:[],duplicatedFiles:[]}};var x=function(F,E){E=E.replace(/\/\*[\S\s]*?\*\//g,"");var D=w(F);s.push({href:F?F:"#",fileName:D,fileContent:E})};var k=function(D){var E=(function(){var F={src:[],block:[]};jQuery.each(D,function(H,G){if(!!G.src){F.src.push(G)}else{if(!!G.innerHTML){F.block.push(G)}}});return F})();return E};var C=function(D){chrome.extension.sendMessage({type:MSG_TYPE.GET_JS,link:D.src},function(E){x(E.path,E.content);r()})};var e=function(D){x("",D.innerHTML);r()};var r=function(){var D=i();if(l()||!D){chrome.extension.sendMessage({type:MSG_TYPE.JS_READY});return}n();if(o()){g(true)}if(!!D.block){e(D.block)}else{if(!!D.src){C(D.src)}}};var v=function(){scripts=k(document.scripts);if(scripts.block&&scripts.block.length>0){jQuery.each(scripts.block,function(E,D){A({src:null,block:D})})}if(scripts.src&&scripts.src.length>0){jQuery.each(scripts.src,function(D,E){A({src:E,block:null})})}r()};var h=function(){var D=false;jQuery.each(s,function(E,F){z(F)});m.scriptTag={scriptSrc:jQuery("script[src]").length,scriptBlock:jQuery("script:not(script[src])").length}};var z=function(D){var F=D.fileName;var E=D.fileContent;c(D)};var t=function(){chrome.extension.sendMessage({type:MSG_TYPE.GET_COOKIE,url:location.href},function(D){_cookies=D.cookie})};var p=function(){m.cookies=_cookies};var c=function(F){var D=F.fileContent.split(/\n/);var E=F.fileContent.length/D.length;if(E<150&&D.length>1){m.jsMinified.count++;m.jsMinified.files.push({href:F.href,fileName:F.fileName})}};var u=function(){var E=document.querySelectorAll("script[src]");var D=[];jQuery.each(E,function(G,H){if(!H.src){return true}var F=w(H.src);if(F.indexOf("tangram")>-1){D.push(F)}});m.tangram=D};var q=function(){scripts=k(document.scripts);var F={};var E=[];var D={};if(scripts.src&&scripts.src.length>0){jQuery.each(scripts.src,function(G,H){F[H.src]=parseInt(F[H.src]||0,10)+1});jQuery.each(F,function(G,I){if(I>1){E.push({href:G,count:I})}else{var H="";var J=[];jQuery.each(s,function(L,K){if(K.href==G){H=K.fileContent.replace(/\s+/g,"");return false}});jQuery.each(s,function(L,K){if(H==K.fileContent.replace(/\s+/g,"")&&!D[K.href]&&J.join(",").indexOf(K.href)==-1){J.push(K.href)}});if(J.length>1){E.push({href:G,dupFiles:J});D[G]=true}}})}m.duplicatedFiles=E};var a=function(){h()};var j=function(){g(false);v();t()};var f=function(D){b();p();a();u();q();D.call(null,m)};return{init:j,detect:f,getCookies:t}})();baidu.namespace.register("baidu.fcptabs");baidu.fcptabs=(function(){var b={};var g=function(){var j=jQuery("#fe-helper-box");var k=jQuery("#fe-helper-main-tab");if(j[0]){j.remove()}j=jQuery('<div id="fe-helper-box" class="fe-helper-hide"></div>').appendTo("body");jQuery('<iframe id="fe-helper-main-ifr" src="about:blank" frameborder="0"></iframe>').appendTo(j);k=jQuery('<div id="fe-helper-main-tab"></div>').appendTo(j).html('		<ul id="fe-helper-main-ul">			<li id="fe-helper-closethick"><span class="ui-icon ui-icon-closethick" title="关闭面板">Close</span></li>			<li id="fe-helper-plusthick" class="fe-helper-hide"><span class="ui-icon ui-icon-plusthick" title="最大化面板">Maximun</span></li>			<li id="fe-helper-minusthick"><span class="ui-icon ui-icon-minusthick" title="最小化面板">Minimun</span></li>		</ul>		');j.css({height:jQuery(window).height()});k.tabs({tabTemplate:"<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close'>Remove Tab</span></li>",add:function(n,p){jQuery("#fe-helper-tab-"+b.type).css({height:jQuery(window).height()-80});var m="fe-helper-acc-"+b.type;jQuery(p.panel).append("<div id='"+m+"'>"+b.tabContent+"</div>");jQuery("#"+m).css({height:jQuery(window).height()-80});if(b.isAccordion){jQuery("#"+m).accordion({collapsible:true,active:false});var o=jQuery("#"+m+" .rst-content");var l=jQuery(window).height()-120-o.length*30;o.css({height:l})}}});jQuery("#fe-helper-main-ul span.ui-icon-close").live("click",function(){var l=jQuery("#fe-helper-main-ul li");var m=l.index(jQuery(this).parent())-3;k.tabs("remove",m);if(l.length==4){b.tabBox.remove()}});jQuery("#fe-helper-closethick").click(function(l){b.tabBox.hide("slide")});jQuery("#fe-helper-plusthick").click(function(l){b.tabBox.css({height:jQuery(window).height()});jQuery(this).hide().next().show()});jQuery("#fe-helper-minusthick").click(function(l){b.tabBox.css({height:38});jQuery(this).hide().prev().show()});jQuery(window).resize(function(l){b.tabBox.css({height:jQuery(window).height()})});b.tabBox=j;b.mainTab=k;return j};var f=function(k,m,l,j){b.type=k;b.tabContent=l;b.isAccordion=j;return b.mainTab.tabs("add","#fe-helper-tab-"+b.type,m)};var h=function(j,k){return f(j+"-issue-sug",baidu.i18n.getMessage("msg0061",[j]),k,false)};var d=function(j){return f("html",baidu.i18n.getMessage("msg0001"),j,true)};var i=function(j){return f("js",baidu.i18n.getMessage("msg0003"),j,true)};var c=function(k,j){b.cssTabContent=j;b.cssTabCount=b.cssTabCount||0;b.cssTabCount++;b.cssTab=jQuery("#fe-helper-tab-css");if(!b.cssTab[0]){f("css",baidu.i18n.getMessage("msg0002"),"",false);b.cssTab=jQuery("#fe-helper-tab-css").html('<ul id="fe-helper-css-ul"></ul>');b.cssTab.tabs({tabTemplate:"<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close'>Remove Tab</span></li>",add:function(n,p){var m="fe-helper-css-acc-"+b.cssTabCount;jQuery(p.panel).append("<div id='"+m+"'>"+b.cssTabContent+"</div>");jQuery("#"+m).accordion({collapsible:true,active:false});var o=jQuery("#"+m+" .rst-content");var l=jQuery(window).height()-180-o.length*30;o.css({height:l})}});jQuery("#fe-helper-css-ul span.ui-icon-close").live("click",function(){var l=jQuery("#fe-helper-css-ul li");var m=l.index(jQuery(this).parent());b.cssTab.tabs("remove",m)})}return b.cssTab.tabs("add","#fe-helper-tab-css-"+b.cssTabCount,k)};var e=function(){var j=new Date();baidu.fcptabs.createMainTab();if(b.progressbar){b.mask.remove()}b.mask=jQuery('<div id="fe-helper-pb-mask"><div id="f-h-p-m"></div><div id="fe-helper-progress-bar-img">正在进行页面检测，请稍后...</div><div id="fe-helper-progress-bar"></div></div>').appendTo("body");jQuery("#f-h-p-m").css({height:jQuery(window).height(),width:jQuery(window).width()});var k=chrome.extension.getURL("static/img/pbar-ani.gif");jQuery("#fe-helper-progress-bar-img").css({background:"url("+k+") repeat-x"});b.progressbar=jQuery("#fe-helper-progress-bar").progressbar({value:0,complete:function(l,m){var n=jQuery("#fe-helper-progress-bar-img").html("页面检测完成，共计耗时："+(new Date()-j)/1000+" s");b.tabBox.show("slide",{},500);jQuery("#f-h-p-m").fadeOut(500);n.fadeOut(3000)}});jQuery("#fe-helper-progress-bar-img").css({top:jQuery(window).height()/2-40,left:(jQuery(window).width()-800)/2})};var a=function(j){b.progressbar.progressbar("value",j)};return{createMainTab:g,addHtmlTab:d,addJavascriptTab:i,addCssTab:c,addIssueSuggestionTab:h,createProgressBar:e,updateProgressBar:a}})();baidu.namespace.register("baidu.fcphelper");baidu.fcphelper=(function(){var e=function(u){return'			<h3 class="rst-title">				<a href="#">'+u.title+'：					<span class="rst-count">'+u.count+'</span>				</a>			</h3>			<div class="rst-content">'+u.content+"</div>			"};var t=function(u,B,w){var z=[];var A=0;z.push("<table>");z.push('<thead><tr><td>序号（Num）</td><td class="td-content-title">&nbsp;</td><td class="td-content-content">描述（Description）</td></tr></thead><tbody>');var v=function(E,D){var C=A%2==0?"tr-content-even":"";z.push('<tr class="'+C+'"><th class="td-linenum" rowspan="2">'+(++A)+'</th><td class="td-content-title"><span class="-x-issue">问题</span></td><td class="td-content-content -c-x-issue">'+E+"</td></tr>");z.push('<tr class="'+C+'"><td class="td-content-title"><span class="-x-suggestion">建议</span></td><td class="td-content-content">'+D+"</td></tr>")};var y;for(var x=B;x<=w;x++){y=("0000"+x);y=u+"_"+y.substr(y.length-4);v(baidu.i18n.getMessage(y),baidu.i18n.getMessage(y+"_suggestion"))}z.push("</tbody></table>");return z.join("")};var q=function(v,z,u){var w=[];var x=0;w.push("<div>"+baidu.i18n.getMessage("msg0042",[document.cookie.getBytes()])+"。如下是和整个站点相关的cookie：</div><br />");w.push("<table>");w.push('<thead><tr><td>序号</td><td class="td-cookie-name">名称（name）</td><td class="td-cookie-value">值（value）</td><td class="td-cookie-domain">所在域（domain）</td><td class="td-cookie-expires">过期时间（expires）</td><td class="td-cookie-op">操作</td></tr></thead><tbody>');var y=new Date()-1;jQuery.each(v.cookies,function(B,A){x++;w.push('<tr><td class="td-cookie-linenum">'+(B+1)+'</td><td class="td-cookie-name">'+A.name+'</td><td class="td-cookie-value" id="td-cookie-value-"'+A.name+">"+A.value+'</td><td class="td-cookie-domain">'+A.domain+'</td><td class="td-cookie-expires">'+(A.expirationDate?new Date(A.expirationDate*1000).format("yyyy年MM月dd日 HH时mm分ss秒"):"-")+'</td><td class="td-cookie-op"><button class="fe-a-cookie-delete -f-a-c-d-'+y+' ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only"><span class="ui-button-text">删除</span></button><input type="hidden" id="hid-url-'+A.name+'" value="'+A.url+'" /><input type="hidden" id="hid-domain-'+A.name+'" value="'+A.domain+'" /><input type="hidden" id="hid-storeId-'+A.name+'" value="'+A.storeId+'" /><input type="hidden" id="hid-expires-'+A.name+'" value="'+(A.expirationDate?A.expirationDate:"")+'" /></td></tr>')});w.push("</tbody></table>");u.push(e({title:z,count:x,content:w.join("")}));jQuery("#fe-helper-box .-f-a-c-d-"+y).live("click",function(E){var D=jQuery(this);var C=D.parent().parent();var B=C.children(".td-cookie-name").html().trim();var A=jQuery("#hid-storeId-"+B).val().trim();chrome.extension.sendMessage({type:MSG_TYPE.REMOVE_COOKIE,name:B,url:jQuery("#hid-url-"+B).val().trim(),storeId:A},function(I){var H=D.parent().parent().parent();var G=H.index(C)-1;var F=0;C.remove();H.find("td.td-cookie-linenum").each(function(J,K){jQuery(K).html((J+1));F++});H.parent().parent().prev().find(".rst-count").html(F)})})};var j=function(x,z,w){var A=[];var B=0;A.push("<table>");A.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');var u=function(E){A.push('<tr><th class="td-linenum">'+ ++B+'</th><td class="td-content">'+E+"</td></tr>")};if(x.scriptTag.scriptBlock){u(baidu.i18n.getMessage("msg0033",[x.scriptTag.scriptBlock]))}if(x.scriptTag.scriptSrc){u(baidu.i18n.getMessage("msg0034",[x.scriptTag.scriptSrc]))}if(x.jsMinified.count>0){var D=[];jQuery.each(x.jsMinified.files,function(E,F){if(F.href=="#"){D.push(baidu.i18n.getMessage("msg0047",[F.fileName]))}else{D.push(baidu.i18n.getMessage("msg0062",[F.href,F.fileName]))}});u(baidu.i18n.getMessage("msg0045",[D.join("、")]))}if(x.tangram.length>0){var D=[];jQuery.each(x.tangram,function(E,F){D.push(F)});if(D.length==1){u(baidu.i18n.getMessage("msg0054",[D.join("")]))}else{u(baidu.i18n.getMessage("msg0055",[D.join("、")]))}}if(x.duplicatedFiles.length){var C=[];var y=[];var v=[];jQuery.each(x.duplicatedFiles,function(F,G){if(G.dupFiles){var E=[];jQuery.each(G.dupFiles,function(H,I){E.push(baidu.i18n.getMessage("msg0069",[I,I]))});C.push(baidu.i18n.getMessage("msg0070",[E.join("、")]))}else{y.push(baidu.i18n.getMessage("msg0068",[G.href,G.href,G.count]))}});if(y.length){v.push(baidu.i18n.getMessage("msg0066",['<div style="margin-left:30px;">'+y.join("")+"</div>"]))}if(C.length){v.push(baidu.i18n.getMessage("msg0067",['<div style="margin-left:30px;">'+C.join("")+"</div>"]))}u(v.join(""))}A.push("</tbody></table>");w.push(e({title:z,count:B,content:A.join("")}))};var i=function(w,A,v){var z=true;for(var u in w.HTMLBase.HTMLDeprecatedTag){z=false;break}if(z){return}var x=[];var y=0;x.push("<table>");x.push('<thead><tr><td>标签（Tag）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');jQuery.each(w.HTMLBase.HTMLDeprecatedTag,function(B,C){y++;x.push('<tr><th class="td-linenum">'+B+'</th><td class="td-content">'+baidu.i18n.getMessage("msg0004",[C])+baidu.i18n.getMessage("msg0005")+"</td></tr>")});x.push("</tbody></table>");v.push(e({title:A,count:y,content:x.join("")}))};var h=function(w,A,v){var z=true;for(var u in w.HTMLBase.HTMLDeprecatedAttribute){z=false;break}if(z){return}var x=[];var y=0;x.push("<table>");x.push('<thead><tr><td>属性（Attr）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');jQuery.each(w.HTMLBase.HTMLDeprecatedAttribute,function(B,C){y++;x.push('<tr><th class="td-linenum">'+B+'</th><td class="td-content"><span class="x-detail">'+(function(){var D=[];jQuery.each(C,function(F,E){D.push(baidu.i18n.getMessage("msg0007",[E,F]))});return D.join("")})()+baidu.i18n.getMessage("msg0005")+"</span></td></tr>")});x.push("</tbody></table>");v.push(e({title:A,count:y,content:x.join("")}))};var f=function(v,y,u){var x=v.LINK.notInHead;if(x.length==0){return}var w="";w="<div>"+baidu.i18n.getMessage("msg0021",[x.length,"head"])+"</div>";w+=(function(A){var z=["<table>"];z.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');if(x.length){jQuery.each(A,function(B,C){z.push('<tr>						<th class="td-linenum">'+(B+1)+'</th>						<td class="td-content">'+C.outerHTML.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</td>					</tr>")})}z.push("</tbody></table>");return z.join("")})(x);u.push(e({title:y,count:x.length,content:w}))};var l=function(v,x,u){if(v.tagInclude.length==0){return}var w="";w+=(function(z){var y=["<table>"];y.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');if(v.tagInclude.length>0){jQuery.each(z,function(B,A){y.push('<tr>						<th class="td-linenum">'+(B+1)+'</th>						<td class="td-content">'+baidu.i18n.getMessage("msg0035",[A.inline,A.block])+"</td>					</tr>")})}y.push("</tbody></table>");return y.join("")})(v.tagInclude);u.push(e({title:x,count:v.tagInclude.length,content:w}))};var p=function(v){var w=[];var y="<strong>混杂模式</strong>";var x="<em>标准模式</em>";var z=(v.documentMode.WebKit=="S")?x:y;if(v.documentMode.hasDocType){w.push(baidu.i18n.getMessage("msg0009"));if(v.documentMode.isUnusualDocType){w.push(baidu.i18n.getMessage("msg0010",[z,y]))}if(v.documentMode.hasConditionalCommentBeforeDTD||v.documentMode.hasCommentBeforeDTD){w.push(baidu.i18n.getMessage("msg0011",[z,y]))}if(v.documentMode.IE==v.documentMode.WebKit){w.push(baidu.i18n.getMessage("msg0012",[z]));if(v.documentMode.WebKit=="Q"){w.push(baidu.i18n.getMessage("msg0013"))}}else{if(!v.documentMode.isUnusualDocType){if(v.documentMode.IE){var u=(v.documentMode.IE=="Q")?y:x;var A=(v.documentMode.WebKit=="Q")?y:x;w.push(baidu.i18n.getMessage("msg0014",[u,A]));w.push(baidu.i18n.getMessage("msg0013"))}else{w.push(baidu.i18n.getMessage("msg0015"))}}else{w.push(baidu.i18n.getMessage("msg0013"))}}}else{w.push(baidu.i18n.getMessage("msg0016",[z]));w.push(baidu.i18n.getMessage("msg0013"))}return w.join("")};var r=function(w,B,v){var z=[];var A=0;z.push("<table>");z.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');var u=function(C){z.push('<tr><th class="td-linenum">'+(++A)+'</th><td class="td-content">'+C+"</td></tr>")};u(p(w));u(baidu.i18n.getMessage("msg0028",[w.DOM.count]));u(baidu.i18n.getMessage("msg0063",[w.DOM.maxDepth.depth,w.DOM.maxDepth.xpath]));if(w.title.length==0){u(baidu.i18n.getMessage("msg0049")+baidu.i18n.getMessage("msg0052"))}else{if(w.title.length>1){u(baidu.i18n.getMessage("msg0051")+baidu.i18n.getMessage("msg0052"))}else{if(!w.title[0].isInHead){u(baidu.i18n.getMessage("msg0050")+baidu.i18n.getMessage("msg0052"))}}}if(w.imgTag.length>0){var y="";jQuery.each(w.imgTag,function(D,C){y="";y+=C.id?"#"+C.id:"";y+=y.className?"."+y.className.replace(/\s+/g,"."):"";y=y?y:C.outerHTML.replace(/</g,"&lt;").replace(/>/g,"&gt;");u(baidu.i18n.getMessage("msg0053",[y]))})}if(w.DOM.allComm.length){if(w.DOM.IECondComm.length){u(baidu.i18n.getMessage("msg0018",[w.DOM.IECondComm.length]))}if(w.DOM.FFNotSptComm.length){u(baidu.i18n.getMessage("msg0060",[w.DOM.FFNotSptComm.length]))}u(baidu.i18n.getMessage("msg0030",[w.DOM.allComm.length,w.DOM.allComm.join("").getBytes()])+baidu.i18n.getMessage("msg0019"))}if(w.ID.count){var x=[];jQuery.each(w.ID.ids,function(D,C){x.push(baidu.i18n.getMessage("msg0064",[D,C]))});u(baidu.i18n.getMessage("msg0026",[w.ID.count,x.join("，")]))}if(w.DOM.invalidInput.count){u(baidu.i18n.getMessage("msg0029",[w.DOM.invalidInput.count]))}if(!w.htmlMinified){u(baidu.i18n.getMessage("msg0043"))}if(w.unClosedTags.length>0){var y=[];jQuery.each(w.unClosedTags,function(C,D){y.push(baidu.i18n.getMessage("msg0046",[D]))});u(baidu.i18n.getMessage("msg0038",[y.join("、")]))}z.push("</tbody></table>");v.push(e({title:B,count:A,content:z.join("")}))};var k=function(v){var w=[baidu.i18n.getMessage("msg0039"),baidu.i18n.getMessage("msg0040"),baidu.i18n.getMessage("msg0041")];var u=function(y){var x=["<table>"];x.push('<thead><tr><td>序号（Num）</td><td class="td-content">选择器（CSS Selector）</td></tr></thead><tbody>');jQuery.each(y,function(z,A){x.push('<tr><th class="td-linenum">'+(z+1)+'</th><td class="td-content"><span class="x-selector">'+A.selector+'</span><span class="x-css-text">'+A.cssText+"</span></td></tr>")});x.push("</tbody></table>");return x.join("")};jQuery.each(v.styles,function(y,z){var x=[];jQuery.each(z.content,function(B,A){x.push(e({title:w[B],count:A.count,content:u(A.content)}))});baidu.fcptabs.addCssTab(z.path,x.join(""))})};var c=function(x,w){var y=[];var B=0;var z=0;y.push("<table>");y.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');var v=function(C){y.push('<tr><th class="td-linenum">'+(++B)+'</th><td class="td-content">'+C+"</td></tr>")};if(x.backgroundImages.length){var u=[];var A=new Date()-1;jQuery.each(x.backgroundImages,function(C,D){u=['<div class="table-css-bg -t-c-b-'+A+'" style="display:none;">'];jQuery.each(D.bgImages,function(F,E){u.push("<div>"+E+"</div>")});u.push("</div>");v(baidu.i18n.getMessage("msg0057",[D.fileName,D.bgImages.length,A])+u.join(""));z+=D.bgImages.length});jQuery("#fe-helper-box .-x-expand-"+A).live("click",function(){var D=jQuery(this);var C=D.parent().next();if(C.css("display")=="none"){C.slideDown(300);D.html("收起")}else{C.slideUp(300);D.html("展开")}});jQuery("#fe-helper-box .-t-c-b-"+A+" div").live("mouseover",function(C){var D=jQuery("#fe-img-tootip");if(!D[0]){D=jQuery('<img id="fe-img-tootip" src="'+jQuery(this).html().trim()+'" alt="load image failed" />').appendTo("body")}else{D.attr("src",jQuery(this).html().trim())}D.css({top:C.pageY+20,left:C.pageX+20,"max-width":500,"max-height":500}).show()}).live("mouseout",function(C){var D=jQuery("#fe-img-tootip");D.hide()})}y.push("</tbody></table>");w.push(e({title:baidu.i18n.getMessage("msg0065"),count:z,content:y.join("")}))};var m=function(x){var A=[];var B=0;var w=[];A.push("<table>");A.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');var u=function(E){A.push('<tr><th class="td-linenum">'+(++B)+'</th><td class="td-content">'+E+"</td></tr>")};if(x.duplicatedFiles.length){var C=[];var y=[];var v=[];jQuery.each(x.duplicatedFiles,function(F,G){if(G.dupFiles){var E=[];jQuery.each(G.dupFiles,function(H,I){E.push(baidu.i18n.getMessage("msg0069",[I,I]))});C.push(baidu.i18n.getMessage("msg0070",[E.join("、")]))}else{y.push(baidu.i18n.getMessage("msg0068",[G.href,G.href,G.count]))}});if(y.length){v.push(baidu.i18n.getMessage("msg0066",['<div style="margin-left:30px;">'+y.join("")+"</div>"]))}if(C.length){v.push(baidu.i18n.getMessage("msg0067",['<div style="margin-left:30px;">'+C.join("")+"</div>"]))}u(v.join(""))}if(x.cssMinified.count>0){var D=[];jQuery.each(x.cssMinified.files,function(E,F){if(F.href=="#"){D.push(baidu.i18n.getMessage("msg0047",[F.fileName]))}else{D.push(baidu.i18n.getMessage("msg0062",[F.href,F.fileName]))}});u(baidu.i18n.getMessage("msg0044",[D.join("、")]))}if(x.expressions.length){var z=[],D=0;jQuery.each(x.expressions,function(E,F){z.push(baidu.i18n.getMessage("msg0059",[F.fileName,F.count]));D+=F.count});u(baidu.i18n.getMessage("msg0058",[D,z.join("、")]))}A.push("</tbody></table>");w.push(e({title:baidu.i18n.getMessage("msg0048"),count:B,content:A.join("")}));c(x,w);baidu.fcptabs.addCssTab(baidu.i18n.getMessage("msg0048"),w.join(""))};var o=function(){baidu.html.detect(function(u){var v=[];i(u,baidu.i18n.getMessage("msg0006"),v);h(u,baidu.i18n.getMessage("msg0008"),v);f(u,baidu.i18n.getMessage("msg0022"),v);l(u,baidu.i18n.getMessage("msg0036"),v);r(u,baidu.i18n.getMessage("msg0020"),v);baidu.fcptabs.addHtmlTab(v.join(""))})};var b=function(){baidu.css.detect(function(u){k(u);m(u)})};var s=function(){baidu.js.detect(function(v){var u=[];q(v,baidu.i18n.getMessage("msg0031"),u);j(v,baidu.i18n.getMessage("msg0032"),u);baidu.fcptabs.addJavascriptTab(u.join(""))})};var a=function(){var u=function(v){return'<a class="-f-h-get-more-" href="#" onclick="return false;">'+v+"&gt;&gt;</a>"};jQuery(u("查看更多HTML帮助")).appendTo("#fe-helper-tab-html").click(function(x){if(!jQuery("#fe-helper-tab-HTML-issue-sug")[0]){baidu.fcptabs.addIssueSuggestionTab("HTML",t("html",1,42))}var v=jQuery("#fe-helper-main-tab>div");var w=v.index(jQuery("#fe-helper-tab-HTML-issue-sug"));jQuery("#fe-helper-main-tab").tabs("select",w)});jQuery(u("查看更多CSS帮助")).appendTo("#fe-helper-tab-css").click(function(x){if(!jQuery("#fe-helper-tab-CSS-issue-sug")[0]){baidu.fcptabs.addIssueSuggestionTab("CSS",t("css",1,119))}var v=jQuery("#fe-helper-main-tab>div");var w=v.index(jQuery("#fe-helper-tab-CSS-issue-sug"));jQuery("#fe-helper-main-tab").tabs("select",w)});jQuery(u("查看更多Javascript帮助")).appendTo("#fe-helper-tab-js").click(function(x){if(!jQuery("#fe-helper-tab-Javascript-issue-sug")[0]){baidu.fcptabs.addIssueSuggestionTab("Javascript",t("javascript",1,114))}var v=jQuery("#fe-helper-main-tab>div");var w=v.index(jQuery("#fe-helper-tab-Javascript-issue-sug"));jQuery("#fe-helper-main-tab").tabs("select",w)})};var d=function(){baidu.css.init();baidu.js.init()};var n=function(u){baidu.html.init(u)};var g=function(){baidu.fcptabs.createProgressBar();window.setTimeout(function(){o();b();s();a();baidu.fcptabs.updateProgressBar(100)},100)};return{initStaticFile:d,initHtml:n,detect:g}})();baidu.namespace.register("baidu.grid");baidu.grid=(function(){var b=function(){var d=jQuery("#fe-helper-box");if(d[0]){d.remove()}var f=chrome.extension.getURL("static/img/grid.png");var g=jQuery(window);var e=jQuery("body");jQuery('<div id="fe-helper-box"></div>').appendTo("body").css({position:"static"});jQuery('<div id="fe-helper-grid"></div>').appendTo("#fe-helper-box").css({background:"url("+f+") repeat",width:e.width(),height:Math.max(g.height(),e.height())}).mousemove(function(k){var l={};try{l=document.getElementsByTagName("body")[0].getBoundingClientRect()}catch(i){l={left:0,top:0}}jQuery("#fe-helper-g-pos").show().css({width:k.pageX-l.left,height:k.pageY});var j=Math.min(k.pageY,jQuery(window).height()+jQuery("body").scrollTop()-40);var h=Math.min(k.pageX,jQuery(window).width()+jQuery("body").scrollLeft()-200)+5-l.left;jQuery("#fe-helper-gp-info").show().css({top:j,left:h}).html("top = "+k.pageY+" px ,left = "+k.pageX+" px")}).mouseout(function(h){jQuery("#fe-helper-g-pos,#fe-helper-gp-info").hide()});jQuery("body").keydown(function(h){if(jQuery("#fe-helper-box")[0]){if(h.which==27){jQuery("#fe-helper-box").remove()}}});jQuery(window).resize(function(){if(jQuery("#fe-helper-box")[0]){jQuery("#fe-helper-grid").css({width:Math.max(g.width(),e.width()),height:Math.max(g.height(),e.height())})}});jQuery('<div id="fe-helper-g-pos"></div><div id="fe-helper-gp-info"></div>').appendTo("#fe-helper-box");jQuery('<span id="fe-helper-btn-close-grid">关闭栅格层</span>').appendTo("#fe-helper-box").click(function(){jQuery("#fe-helper-box").remove()});a()};var a=function(){if(!jQuery("#fe-helper-box")[0]){jQuery('<div id="fe-helper-box"></div>').appendTo("body")}jQuery('<div id="fe-helper-ruler-top"></div><div id="fe-helper-ruler-left"></div>').appendTo("#fe-helper-box");var j=0,k=20,g=20;var l=jQuery(window);var h=jQuery("body");var d=Math.max(l.width(),h.width());var e=Math.max(l.height(),h.height());for(var f=30;f<=d;f+=10){j=(f%50)?10:0;jQuery('<div class="h-line"></div>').appendTo("#fe-helper-ruler-top").css({left:f-1,top:j+5,height:k-j-5});if(j==0){jQuery('<div class="h-text">'+f+"</div>").appendTo("#fe-helper-ruler-top").css({left:f+2})}}for(var f=0;f<=e;f+=10){_l=(f%50)?10:0;jQuery('<div class="v-line"></div>').appendTo("#fe-helper-ruler-left").css({left:_l+5,top:f-1,width:g-_l-5});if(_l==0){jQuery('<div class="v-text">'+f+"</div>").appendTo("#fe-helper-ruler-left").css({top:f+2})}}jQuery(window).scroll(function(i){if(jQuery("#fe-helper-box")[0]){jQuery("#fe-helper-ruler-top").css("left",0-jQuery("body").scrollLeft());jQuery("#fe-helper-ruler-left").css("top",0-jQuery("body").scrollTop())}})};var c=function(d){b();if(d&&typeof d=="function"){d.call(null)}};return{detect:c}})();baidu.namespace.register("baidu.fehelper");baidu.fehelper=(function(){var b=function(){if(!jQuery("#_fehelper_jq_ui_css_")[0]){var f=chrome.extension.getURL("static/vendor/jquery-ui-1.8/css/jquery-ui-1.8.16.custom.hot_datauri.css");jQuery('<link id="_fehelper_jq_ui_css_" href="'+f+'" rel="stylesheet" type="text/css" />').appendTo("head");var e=chrome.extension.getURL("static/css/fe-helper.css");jQuery('<link id="_fehelper_fcp_css_" href="'+e+'" rel="stylesheet" type="text/css" />').appendTo("head")}};var a=function(){baidu.fcphelper.initStaticFile();chrome.extension.onMessage.addListener(function(f,e,g){if(f.type==MSG_TYPE.BROWSER_CLICKED&&f.event==MSG_TYPE.FCP_HELPER_DETECT){b();baidu.fcphelper.initHtml(function(){baidu.fcphelper.detect()})}})};var c=function(){chrome.runtime.onMessage.addListener(function(f,e,g){if(f.type==MSG_TYPE.BROWSER_CLICKED&&f.event==MSG_TYPE.GRID_DETECT){b();baidu.grid.detect()}})};var d=function(){a();c()};return{main:d}})();baidu.fehelper.main();baidu.feNotification=(function(){var a=function(c){if(!window.webkitNotifications){return}var d=encodeURIComponent;var e=webkitNotifications.createHTMLNotification(chrome.extension.getURL(c));e.show();return e};var b=function(c){if(!window.webkitNotifications){return}if(!c.icon){c.icon="static/img/fe-48.png"}if(!c.title){c.title="\u5C0F\u63D0\u793A"}var d=webkitNotifications.createNotification(chrome.runtime.getURL(c.icon),c.title,c.message);d.show();if(c.autoClose!==false){d.ondisplay=function(g){var f=localStorage.getItem("opt_item_notification");setTimeout(function(){d.cancel()},f||5000)}}return d};return{notifyHtml:a,notifyText:b}})();baidu.calcPageLoadTime=(function(){var c={};var d=function(){if(c.header&&c.time&&c.pageInfo){b()}else{$.ajax({type:"GET",url:window.location.href,complete:function(i,h){c.header={date:i.getResponseHeader("Date"),connection:i.getResponseHeader("Connection"),contentEncoding:i.getResponseHeader("Content-Encoding"),contentLength:i.getResponseHeader("Content-Length"),server:i.getResponseHeader("Server"),vary:i.getResponseHeader("Vary"),transferEncoding:i.getResponseHeader("Transfer-Encoding"),contentType:i.getResponseHeader("Content-Type"),cacheControl:i.getResponseHeader("Cache-Control"),exprires:i.getResponseHeader("Exprires"),lastModified:i.getResponseHeader("Last-Modified")};a();g();b()}})}};var a=function(){c.pageInfo={title:document.title,url:location.href}};var g=function(){c.time=performance.timing};var b=function(){chrome.extension.sendMessage({type:MSG_TYPE.CALC_PAGE_LOAD_TIME,wpo:c})};var f=function(){if(/^((http)|(https))\:\/\//.test(location.href)){d()}else{a();g();b()}};var e=function(){chrome.runtime.onMessage.addListener(function(j,i,k){if(j.type==MSG_TYPE.GET_PAGE_WPO_INFO){(function h(){(document.readyState=="complete")?f():setTimeout(h,1000)})()}})};return{init:e}})();baidu.calcPageLoadTime.init();var JsonFormatDealer=(function(){var c=1,g=2,a=3,e=4,n=5,p=6;function i(v){v=("__"+v+"__").split("");var u={singleQuote:false,doubleQuote:false,regex:false,blockComment:false,lineComment:false,condComp:false};for(var t=0,s=v.length;t<s;t++){if(u.regex){if(v[t]==="/"&&v[t-1]!=="\\"){u.regex=false}continue}if(u.singleQuote){if(v[t]==="'"&&v[t-1]!=="\\"){u.singleQuote=false}continue}if(u.doubleQuote){if(v[t]==='"'&&v[t-1]!=="\\"){u.doubleQuote=false}continue}if(u.blockComment){if(v[t]==="*"&&v[t+1]==="/"){v[t+1]="";u.blockComment=false}v[t]="";continue}if(u.lineComment){if(v[t+1]==="\n"||v[t+1]==="\r"){u.lineComment=false}v[t]="";continue}if(u.condComp){if(v[t-2]==="@"&&v[t-1]==="*"&&v[t]==="/"){u.condComp=false}continue}u.doubleQuote=v[t]==='"';u.singleQuote=v[t]==="'";if(v[t]==="/"){if(v[t+1]==="*"&&v[t+2]==="@"){u.condComp=true;continue}if(v[t+1]==="*"){v[t]="";u.blockComment=true;continue}if(v[t+1]==="/"){v[t]="";u.lineComment=true;continue}u.regex=true}}return v.join("").slice(2,-2)}localStorage.jfVersion="0.5.6";var d,b=document.createElement("span");function j(u,t){var s=b.cloneNode(false);s.className=t;s.innerText=u;return s}function l(t){var s=b.cloneNode(false);s.innerText=t;return s}function r(t){var s=b.cloneNode(false);s.className=t;return s}var q={t_kvov:r("kvov"),t_exp:r("e"),t_key:r("k"),t_string:r("s"),t_number:r("n"),t_null:j("null","nl"),t_true:j("true","bl"),t_false:j("false","bl"),t_oBrace:j("{","b"),t_cBrace:j("}","b"),t_oBracket:j("[","b"),t_cBracket:j("]","b"),t_ellipsis:r("ell"),t_blockInner:r("blockInner"),t_colonAndSpace:document.createTextNode(":\u00A0"),t_commaText:document.createTextNode(","),t_dblqText:document.createTextNode('"')};function h(F,C){var A,E,y,w=q,x,v,s;if(typeof F==="string"){A=c}else{if(typeof F==="number"){A=g}else{if(F===false||F===true){A=n}else{if(F===null){A=p}else{if(F instanceof Array){A=e}else{A=a}}}}}E=w.t_kvov.cloneNode(false);if(A===a||A===e){y=false;for(x in F){if(F.hasOwnProperty(x)){y=true;break}}if(y){E.appendChild(w.t_exp.cloneNode(false))}}if(C!==false){E.classList.add("objProp");v=w.t_key.cloneNode(false);v.textContent=JSON.stringify(C).slice(1,-1);E.appendChild(w.t_dblqText.cloneNode(false));E.appendChild(v);E.appendChild(w.t_dblqText.cloneNode(false));E.appendChild(w.t_colonAndSpace.cloneNode(false))}else{E.classList.add("arrElem")}var D,L;switch(A){case c:var u=b.cloneNode(false),G=JSON.stringify(F);G=G.substring(1,G.length-1);if(F[0]==="h"&&F.substring(0,4)==="http"){var t=document.createElement("A");t.href=F;t.innerText=G;u.appendChild(t)}else{u.innerText=G}s=w.t_string.cloneNode(false);s.appendChild(w.t_dblqText.cloneNode(false));s.appendChild(u);s.appendChild(w.t_dblqText.cloneNode(false));E.appendChild(s);break;case g:s=w.t_number.cloneNode(false);s.innerText=F;E.appendChild(s);break;case a:E.appendChild(w.t_oBrace.cloneNode(true));if(y){E.appendChild(w.t_ellipsis.cloneNode(false));D=w.t_blockInner.cloneNode(false);var B=0,H,K;for(H in F){if(F.hasOwnProperty(H)){B++;L=h(F[H],H);K=w.t_commaText.cloneNode();L.appendChild(K);D.appendChild(L)}}L.removeChild(K);E.appendChild(D)}E.appendChild(w.t_cBrace.cloneNode(true));break;case e:E.appendChild(w.t_oBracket.cloneNode(true));if(y){E.appendChild(w.t_ellipsis.cloneNode(false));D=w.t_blockInner.cloneNode(false);for(var I=0,z=F.length,J=z-1;I<z;I++){L=h(F[I],false);if(I<J){L.appendChild(w.t_commaText.cloneNode())}D.appendChild(L)}E.appendChild(D)}E.appendChild(w.t_cBracket.cloneNode(true));break;case n:if(F){E.appendChild(w.t_true.cloneNode(true))}else{E.appendChild(w.t_false.cloneNode(true))}break;case p:E.appendChild(w.t_null.cloneNode(true));break}return E}function m(u,s){var w=h(u,false);w.classList.add("rootKvov");var t=document.createElement("DIV");t.id="formattedJson";t.appendChild(w);var v=t.outerHTML;if(s!==null){v='<div id="jsonpOpener">'+s+" ( </div>"+v+'<div id="jsonpCloser">)</div>'}return v}var k=function(u){var B=null;var v=JsonFormatEntrance;if(u.type==="SENDING TEXT"){var w,D=u.text;try{w=new Function("return "+D)()}catch(y){D=D.trim();var t;if(!(t=D.indexOf("("))){v.postMessage(["NOT JSON","no opening parenthesis"]);v.disconnect();return}var s=i(D.substring(0,t)).trim();if(!s.match(/^[a-zA-Z_$][\.\[\]'"0-9a-zA-Z_$]*$/)){v.postMessage(["NOT JSON","first bit not a valid function name"]);v.disconnect();return}var C;if(!(C=D.lastIndexOf(")"))){v.postMessage(["NOT JSON","no closing paren"]);v.disconnect();return}var A=i(D.substring(C+1)).trim();if(A!==""&&A!==";"){v.postMessage(["NOT JSON","last closing paren followed by invalid characters"]);v.disconnect();return}D=D.substring(t+1,C);try{w=JSON.parse(D)}catch(z){v.postMessage(["NOT JSON","looks like a function call, but the parameter is not valid JSON"]);return}B=s}if(typeof w!=="object"&&typeof w!=="array"){v.postMessage(["NOT JSON","technically JSON but not an object or array"]);v.disconnect();return}v.postMessage(["FORMATTING"]);var x=m(w,B);v.postMessage(["FORMATTED",x]);v.disconnect()}};var f=function(s){k(s)};var o=function(){};return{postMessage:f,disconnect:o}})();var JsonFormatEntrance=(function(){var r,o,n,i,g,k=JsonFormatDealer,l=+(new Date()),q,u,b,v;var j=function(B){switch(B[0]){case"NOT JSON":o.style.display="";r.innerHTML='<span class="x-json-tips">JSON不合法，请检查：</span>';b=+(new Date());break;case"FORMATTING":u=+(new Date());clearTimeout(g);var y=document.getElementById("optionBar");if(y){y.parentNode.removeChild(y)}y=document.createElement("div");y.id="optionBar";var A=document.createElement("button"),x=document.createElement("button");A.id="buttonFormatted";A.innerText="格式化";A.classList.add("selected");x.id="buttonCollapseAll";x.innerText="折叠所有";var z=false;A.addEventListener("click",function(){if(z){z=false;o.style.display="none";r.style.display="";$(this).text("元数据")}else{z=true;o.style.display="";r.style.display="none";$(this).text("格式化")}$(this).parent().find("button").removeClass("selected");$(this).addClass("selected")},false);x.addEventListener("click",function(){if(!z){if(x.innerText=="折叠所有"){x.innerText="展开所有";e(document.getElementsByClassName("objProp"))}else{x.innerText="折叠所有";c(document.getElementsByClassName("objProp"))}$(this).parent().find("button").removeClass("selected");$(this).addClass("selected")}},false);y.appendChild(A);y.appendChild(x);document.addEventListener("click",m,false);r.parentNode.appendChild(y);break;case"FORMATTED":i.style.display="";r.innerHTML=B[1];v=+(new Date());break;default:throw new Error("Message not understood: "+B[0])}};var t=0;function e(B){var z,y,x,A;for(y=B.length-1;y>=0;y--){z=B[y];z.classList.add("collapsed");if(!z.id){z.id="kvov"+(++t);x=z.firstElementChild;while(x&&!x.classList.contains("blockInner")){x=x.nextElementSibling}if(!x){continue}A=x.children.length;var C=A+(A===1?" item":" items");n.insertAdjacentHTML("beforeend","\n#kvov"+t+'.collapsed:after{color: #aaa; content:" // '+C+'"}')}}}function c(y){for(var x=y.length-1;x>=0;x--){y[x].classList.remove("collapsed")}}var h=navigator.platform.indexOf("Mac")!==-1,d;if(h){d=function(x){return x.metaKey}}else{d=function(x){return x.ctrlKey}}function m(A){if(A.which===1){var z=A.target;if(z.className==="e"){A.preventDefault();var y=z.parentNode,E=r,x=document.body.offsetHeight,C=document.body.scrollTop,B;if(y.classList.contains("collapsed")){if(d(A)){c(y.parentNode.children)}else{c([y])}}else{if(d(A)){e(y.parentNode.children)}else{e([y])}}E.style.marginBottom=0;if(document.body.offsetHeight<window.innerHeight){return}if(document.body.scrollTop===C){return}var D=C-document.body.scrollTop+8;E.style.marginBottom=D+"px";document.body.scrollTop=C;return}}}var f=function(x){j(x)};var w=function(){};var s=function(x){r=document.getElementById("jfContent");if(!r){r=document.createElement("div");r.id="jfContent";document.body.appendChild(r)}r.style.display="";o=document.getElementById("jfContent_pre");if(!o){o=document.createElement("pre");o.id="jfContent_pre";document.body.appendChild(o)}o.innerHTML=JSON.stringify(JSON.parse(x),null,4);o.style.display="none";n=document.getElementById("jfStyleEl");if(!n){n=document.createElement("style");document.head.appendChild(n)}i=document.getElementById("formattingMsg");if(!i){i=document.createElement("pre");i.id="formattingMsg";i.innerHTML='<svg id="spinner" width="16" height="16" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg" version="1.1"><path d="M 150,0 a 150,150 0 0,1 106.066,256.066 l -35.355,-35.355 a -100,-100 0 0,0 -70.711,-170.711 z" fill="#3d7fe6"></path></svg> 格式化中...';document.body.appendChild(i)}k.postMessage({type:"SENDING TEXT",text:x,length:x.length});a(JSON.parse(x))};var a=function(x){try{window.webkitRequestFileSystem(window.TEMPORARY,10*1024*1024,function(z){var B=(+new Date).toString(36);var A=+new Date()+".json";z.root.getDirectory(B,{create:true},function(D){var C=B+"/"+A;z.root.getFile(C,{create:true},function(E){E.createWriter(function(G){G.onwriteend=function(){$("#optionBar").prepend('<a href="'+E.toURL()+'" id="btnDownload" target="_blank" title="在新页面Ctrl+S保存到本地">下载JSON数据</a>')};var F=new Blob([JSON.stringify(x,null,4)],{type:"application/octet-stream"});G.write(F)})})})})}catch(y){}};var p=function(){try{r.innerHTML="";o.innerHTML=""}catch(x){}};return{format:s,clear:p,postMessage:f,disconnect:w}})();baidu.csJsonFormat=(function(){var e=['<div class="mod-json mod-contentscript"><div class="rst-item">','<div id="formatTips">本页JSON数据由FeHelper进行自动格式化，若有任何问题，点击这里提交 ','<a href="http://www.baidufe.com/item/889639af23968ee688b9.html#comment" target="_blank">意见反馈</a>',"</div>",'<div id="formattingMsg">','<svg id="spinner" width="16" height="16" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg" version="1.1">','<path d="M 150,0 a 150,150 0 0,1 106.066,256.066 l -35.355,-35.355 a -100,-100 0 0,0 -70.711,-170.711 z" fill="#3d7fe6"></path>',"</svg>加载中...","</div>",'<div id="jfCallbackName_start" class="callback-name"></div>','<div id="jfContent"></div>','<pre id="jfContent_pre"></pre>','<div id="jfCallbackName_end" class="callback-name"></div>',"</div></div>"].join("");var b=function(){var f=chrome.extension.getURL("static/css/fe-jsonformat.css");jQuery('<link id="_fehelper_fcp_css_" href="'+f+'" rel="stylesheet" type="text/css" />').appendTo("head")};var d=function(){var n=$("body>pre:eq(0)")[0]||{textContent:""};var m=$.trim(n.textContent);if(!m){m=$.trim(document.body.textContent||"")}if(!m){return false}var g=document.body.childNodes;var h=false;for(var l=0,f=g.length;l<f;l++){if(g[l].nodeType==Node.TEXT_NODE){if(!h){m=g[l].textContent;h=true}else{return}}else{if(g[l].nodeType==Node.ELEMENT_NODE){var k=g[l].tagName.toLowerCase();var j=$.trim(g[l].textContent);if(k==="pre"&&j===m){continue}else{if(k==="embed"&&g[l].offsetWidth===0){continue}else{return}}}else{return}}}return m};var a=function(){var i=d();if(!i){return}var l=null;var m=null;try{var g=/^([\w\.]+)\(\s*([\s\S]*)\s*\)$/igm;var h=g.exec(i);if(h!=null){l=h[1];var k=h[2];m=new Function("return "+k)()}}catch(f){return}try{if(m==null||typeof m!="object"){m=new Function("return "+i)();if(typeof m=="string"){m=new Function("return "+m)()}}}catch(j){return}if(m!=null&&typeof m=="object"){try{i=JSON.stringify(m)}catch(f){return}$("body").html(e);b();$("#jfContent").delegate(".kvov","click",function(n){$("#jfContent .kvov").removeClass("x-outline");$(this).removeClass("x-hover").addClass("x-outline");if(!$(n.target).is(".kvov .e")){n.stopPropagation()}else{$(n.target).parent().trigger("click")}}).delegate(".kvov","mouseover",function(n){$(this).addClass("x-hover");return false}).delegate(".kvov","mouseout",function(n){$(this).removeClass("x-hover")});JsonFormatEntrance.clear();JsonFormatEntrance.format(i);if(l!=null){$("#jfCallbackName_start").html(l+"(");$("#jfCallbackName_end").html(")")}}};var c=function(){$(function(){if(!/^filesystem\:/.test(location.href)){a()}})};return{init:c}})();baidu.csJsonFormat.init();